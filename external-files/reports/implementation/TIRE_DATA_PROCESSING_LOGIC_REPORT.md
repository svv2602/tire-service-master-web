# üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤—ã—Ö CSV —Ñ–∞–π–ª–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ Tire Service

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤—ã—Ö CSV —Ñ–∞–π–ª–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **—É–º–Ω—É—é –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö**, –∫–æ—Ç–æ—Ä–∞—è —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π.

## üîç –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

### 1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
```ruby
def should_skip_update?
  return false unless current_version_exists?
  
  current_checksums = calculate_file_checksums
  last_version = TireDataVersion.current
  
  if last_version&.file_checksums == current_checksums
    # –§–∞–π–ª—ã –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    return true
  end
  
  false
end
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ï—Å–ª–∏ MD5 —Ö—ç—à–∏ —Ñ–∞–π–ª–æ–≤ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å ‚Üí –ø—Ä–æ–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "–î–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã"

### 2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏**
–ü–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ –î–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é –¥–∞–Ω–Ω—ã—Ö (`is_active: false`)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ

### 3. **–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**

#### üîÑ **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
**–ö–æ–≥–¥–∞**: `force_reload = false` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç**:
- **–ù–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏** ‚Üí –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏** ‚Üí –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑–ª–∏—á–∏—è—Ö
- **–°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** ‚Üí **–°–û–•–†–ê–ù–Ø–Æ–¢–°–Ø** (–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±—Ä–µ–Ω–¥—ã/–º–æ–¥–µ–ª–∏)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** ‚Üí –ø–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### üóëÔ∏è **–ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞** (–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º)
**–ö–æ–≥–¥–∞**: `force_reload = true` + —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**:
```ruby
# –ó–∞–ø—Ä–µ—â–µ–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!
if force_reload && Rails.env.production?
  return render json: { 
    status: 'error', 
    message: 'üö® –û–ü–ê–°–ù–û–°–¢–¨: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–µ—â–µ–Ω–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!',
    code: 'force_reload_forbidden_in_production'
  }, status: :forbidden
end
```

**–£–º–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞** (—Ç–æ–ª—å–∫–æ dev/staging):
```ruby
def safe_clear_data(used_data)
  # 1. –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —à–∏–Ω (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã)
  CarTireConfiguration.delete_all
  
  # 2. –£–¥–∞–ª—è–µ–º –≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã)  
  TireDataVersion.delete_all
  
  # 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏ (–∏–∑ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π)
  if used_data[:used_models].any?
    unused_models = CarModel.where.not(id: used_data[:used_models])
    unused_models.delete_all # –£–¥–∞–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
  end
  
  # 4. –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±—Ä–µ–Ω–¥—ã (–∏–∑ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π)
  if used_data[:used_brands].any?
    unused_brands = CarBrand.where.not(id: used_data[:used_brands])
    unused_brands.delete_all # –£–¥–∞–ª—è–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ
  end
end
```

## üìã –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤

### **–°—Ç—Ä–æ–≥–∏–π –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**:
```ruby
# 1. –°–Ω–∞—á–∞–ª–∞ –±—Ä–µ–Ω–¥—ã (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å)
brand_files = csv_files.select { |f| File.basename(f) =~ /brand/i }

# 2. –ó–∞—Ç–µ–º –º–æ–¥–µ–ª–∏ (–∑–∞–≤–∏—Å—è—Ç –æ—Ç –±—Ä–µ–Ω–¥–æ–≤)  
model_files = csv_files.select { |f| File.basename(f) =~ /model/i }

# 3. –ó–∞—Ç–µ–º –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏ (–∑–∞–≤–∏—Å—è—Ç –æ—Ç –º–æ–¥–µ–ª–µ–π)
kit_files = csv_files.select { |f| File.basename(f) =~ /kit(?!.*tyre)/i }

# 4. –ù–∞–∫–æ–Ω–µ—Ü —Ä–∞–∑–º–µ—Ä—ã —à–∏–Ω (–∑–∞–≤–∏—Å—è—Ç –æ—Ç –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–π)
tire_size_files = csv_files.select { |f| File.basename(f) =~ /kit.*tyre|tyre.*size/i }
```

**–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Å**:
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏–µ–π –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–æ–ø—É—Å–∫ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫ –ø—Ä–∏ `skip_invalid_rows: true`)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ (–ø—Ä–∏ `fix_suspicious_sizes: true`)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–∏ (fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —á—Ç–µ–Ω–∏—è)

## üèóÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**:
```ruby
def create_aggregated_configurations
  # –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π:
  # –ë—Ä–µ–Ω–¥ ‚Üí –ú–æ–¥–µ–ª—å ‚Üí –ö–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è ‚Üí –†–∞–∑–º–µ—Ä —à–∏–Ω—ã
  
  configurations_created = 0
  
  @processed_kits.each do |kit_data|
    kit_data[:tire_sizes].each do |tire_size|
      config = CarTireConfiguration.create!({
        car_brand_id: kit_data[:brand_id],
        car_model_id: kit_data[:model_id], 
        year_from: kit_data[:year_from],
        year_to: kit_data[:year_to],
        tire_width: tire_size[:width],
        tire_height: tire_size[:height], 
        tire_diameter: tire_size[:diameter]
      })
      configurations_created += 1
    end
  end
  
  @statistics[:configurations_created] = configurations_created
end
```

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**:
- –£–¥–∞–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –±—Ä–µ–Ω–¥–æ–≤ (–¥—É–±–ª–∏–∫–∞—Ç—ã)
- –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —à–∏–Ω
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –±—Ä–µ–Ω–¥–æ–≤

## üìä –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏

### **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏**:
```ruby
def save_version_info
  TireDataVersion.create!({
    version: @version,           # –§–æ—Ä–º–∞—Ç: "2025.1" 
    imported_at: Time.current,
    file_checksums: @file_checksums,
    statistics: @statistics,
    is_active: true
  })
end
```

### **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π**:
```ruby
def cleanup_old_versions
  old_versions = TireDataVersion.inactive.order(imported_at: :desc).offset(5)
  old_versions.destroy_all
  # –•—Ä–∞–Ω–∏—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 5 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫–∞—Ç–∞
end
```

## ‚öôÔ∏è –û–ø—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ UI

### **–î–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**:

1. **skip_invalid_rows** (default: `false`)
   - **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å —Å—Ç—Ä–æ–∫–∏ —Å –æ—à–∏–±–∫–∞–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞ CSV
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è, –∏–º–ø–æ—Ä—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è
   - **UI**: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–ü—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏"

2. **fix_suspicious_sizes** (default: `false`)  
   - **–û–ø–∏—Å–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —à–∏–Ω
   - **–≠—Ñ—Ñ–µ–∫—Ç**: –†–∞–∑–º–µ—Ä—ã –≤–∏–¥–∞ "225/60 R16" –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
   - **UI**: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–ò—Å–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã"

3. **encoding_fallback** (default: `'utf-8'`)
   - **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —á—Ç–µ–Ω–∏—è UTF-8
   - **–í–∞—Ä–∏–∞–Ω—Ç—ã**: 'utf-8', 'windows-1251', 'iso-8859-1'

4. **version** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –≤–µ—Ä—Å–∏—è –¥–∞–Ω–Ω—ã—Ö
   - **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ "YYYY.MM"

### **force_reload –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –≤ UI** (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –≤–∫–ª–∞–¥–∫—É "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ"
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- **–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### **–ß—Ç–æ –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è**:
- ‚úÖ **–ë—Ä–µ–Ω–¥—ã –∏ –º–æ–¥–µ–ª–∏ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π**
- ‚úÖ **–ê–∫—Ç–∏–≤–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** 
- ‚úÖ **–î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤**
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π** (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5)

### **–ß—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–∏—â–µ–Ω–æ**:
- üóëÔ∏è **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —à–∏–Ω** (–ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è –∏–∑ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- üóëÔ∏è **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±—Ä–µ–Ω–¥—ã/–º–æ–¥–µ–ª–∏** (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–µ)
- üóëÔ∏è **–°—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö** (—Å—Ç–∞—Ä—à–µ 5 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö)

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç:

### **–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∏–º–ø–æ—Ä—Ç–µ**:
```json
{
  "status": "success",
  "version": "2025.1", 
  "statistics": {
    "brands_processed": 150,
    "models_processed": 2800,
    "configurations_created": 45000,
    "backup_created": true,
    "skipped_rows": 3
  },
  "warnings": ["–ü—Ä–æ–ø—É—â–µ–Ω–æ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫: 3"],
  "message": "–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–æ –≤–µ—Ä—Å–∏–∏ 2025.1"
}
```

### **–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π**:
```json
{
  "status": "success",
  "skipped": true,
  "reason": "no_changes",
  "message": "–§–∞–π–ª—ã –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è"
}
```

## üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### **–î–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π**:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. –í–∫–ª—é—á–∏—Ç–µ `skip_invalid_rows: true` –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫
3. –£–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤–µ—Ä—Å–∏—é –≤ –ø–æ–Ω—è—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "2025.—è–Ω–≤–∞—Ä—å")

### **–î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—É—é –æ—á–∏—Å—Ç–∫—É —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞
- –û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

–°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç **–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ** –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∏—Å–∫–æ–º –ø–æ—Ç–µ—Ä–∏ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏! üéØ