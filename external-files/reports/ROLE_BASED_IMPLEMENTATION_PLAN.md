# üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–æ–ª–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

## üìã –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:**
- –°–æ–∑–¥–∞–Ω —Ö—É–∫ `useRoleAccess()` –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏
- Backend —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ Pundit –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –ú–µ–Ω—é –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è –ø–æ —Ä–æ–ª—è–º

‚ùå **–ü—Ä–æ–±–ª–µ–º—ã:**
- –°—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
- –ü–∞—Ä—Ç–Ω–µ—Ä—ã –≤–∏–¥—è—Ç –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –≤–º–µ—Å—Ç–æ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö
- –§–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ —Ä–æ–ª–∏

## üéØ –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 1.1 ServicePointsPage - –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ç–æ—á–∫–∏ ‚ö°

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä—Ç–Ω–µ—Ä—ã –≤–∏–¥—è—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —Ç–æ—á–∫–∏, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// –í ServicePointsPage.tsx
import { useRoleAccess } from '../../hooks/useRoleAccess';

const ServicePointsPage = () => {
  const { isPartner, partnerId, canViewAllServicePoints } = useRoleAccess();
  
  // –£—Å–ª–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
  const queryParams = useMemo(() => ({
    // –î–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ø–æ partner_id
    partner_id: isPartner ? partnerId : undefined,
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  }), [isPartner, partnerId, ...]);
};
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å `useRoleAccess()` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
2. –£—Å–ª–æ–≤–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `partner_id` –≤ –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
3. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å" –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
4. –°–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏

### 1.2 BookingsPage - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ‚ö°

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä—Ç–Ω–µ—Ä—ã –≤–∏–¥—è—Ç –≤—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:** –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ ServicePointsPage - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ backend –ø–æ–ª–∏—Ç–∏–∫–∏

### 1.3 DashboardPage - –î–∞—à–±–æ—Ä–¥ ‚ö°

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π

## üéØ –≠—Ç–∞–ø 2: –í–∞–∂–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 2.1 ReviewsPage - –û—Ç–∑—ã–≤—ã
- –ü–∞—Ä—Ç–Ω–µ—Ä—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–∑—ã–≤—ã –æ —Å–≤–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ç–æ—á–∫–∞—Ö

### 2.2 OperatorsPage - –û–ø–µ—Ä–∞—Ç–æ—Ä—ã  
- –ü–∞—Ä—Ç–Ω–µ—Ä—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

### 2.3 Analytics - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ü–∞—Ä—Ç–Ω–µ—Ä—ã –≤–∏–¥—è—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫—É —Ç–æ–ª—å–∫–æ –ø–æ —Å–≤–æ–∏–º —Ç–æ—á–∫–∞–º

## üõ†Ô∏è –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å ServicePointsPage (30 –º–∏–Ω)

1. **–î–æ–±–∞–≤–∏—Ç—å —Ö—É–∫ useRoleAccess:**
```typescript
const { isPartner, partnerId, canViewAllServicePoints, getCreateServicePointPath } = useRoleAccess();
```

2. **–£—Å–ª–æ–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
```typescript
const queryParams = useMemo(() => ({
  query: searchQuery || undefined,
  city_id: selectedCity !== 'all' ? Number(selectedCity) : undefined,
  region_id: selectedRegion !== 'all' ? Number(selectedRegion) : undefined,
  // –î–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ø–æ –∏—Ö partner_id
  partner_id: isPartner ? partnerId : (selectedPartner !== 'all' ? Number(selectedPartner) : undefined),
  is_active: selectedStatus !== 'all' ? (selectedStatus === 'active' ? 'true' : 'false') : undefined,
  page: page,
  per_page: PER_PAGE,
}), [searchQuery, selectedCity, selectedRegion, selectedPartner, selectedStatus, page, isPartner, partnerId]);
```

3. **–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É —Å–æ–∑–¥–∞–Ω–∏—è:**
```typescript
const headerConfig = useMemo(() => ({
  title: t('admin.servicePoints.title'),
  actions: [
    {
      label: t('admin.servicePoints.createServicePoint'),
      icon: <AddIcon />,
      onClick: () => navigate(getCreateServicePointPath()),
      variant: 'contained' as const,
      color: 'primary' as const,
    }
  ]
}), [navigate, t, getCreateServicePointPath]);
```

4. **–°–∫—Ä—ã—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–∞—Ä—Ç–Ω–µ—Ä–∞ –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤:**
```typescript
const filtersConfig = useMemo(() => {
  const filters = [
    // ... –¥—Ä—É–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã
  ];
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–∏–ª—å—Ç—Ä –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∞–º –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
  if (canViewAllServicePoints) {
    filters.push({
      key: 'partner',
      label: t('admin.servicePoints.filters.partner'),
      value: selectedPartner,
      onChange: handlePartnerFilterChange,
      options: [
        { value: 'all', label: t('admin.servicePoints.filters.allPartners') },
        ...(partnersData?.data || []).map(partner => ({
          value: partner.id.toString(),
          label: partner.name
        }))
      ]
    });
  }
  
  return filters;
}, [canViewAllServicePoints, selectedPartner, partnersData, t]);
```

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (15 –º–∏–Ω)

1. –í–æ–π—Ç–∏ –ø–æ–¥ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º (partner@test.com / partner123)
2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/admin/service-points`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ—á–∫–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å" –≤–µ–¥–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ —Å–∫—Ä—ã—Ç

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å BookingsPage (20 –º–∏–Ω)

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ ServicePointsPage:
1. –î–æ–±–∞–≤–∏—Ç—å `useRoleAccess()`
2. –£—Å–ª–æ–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `service_point.partner_id`
3. –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å UI –ø–æ–¥ —Ä–æ–ª–∏

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å DashboardPage (25 –º–∏–Ω)

1. –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
   - `AdminDashboard` - –ø–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - `PartnerDashboard` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞

2. –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
```typescript
const DashboardPage = () => {
  const { isPartner, isAdmin, isManager } = useRoleAccess();
  
  if (isPartner) {
    return <PartnerDashboard />;
  }
  
  if (isAdmin || isManager) {
    return <AdminDashboard />;
  }
  
  return <div>–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω</div>;
};
```

## üß™ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏:
- **admin@test.com / admin123** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- **partner@test.com / partner123** - —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- **client@test.com / client123** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ü–∞—Ä—Ç–Ω–µ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ:**
   - –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ç–æ—á–∫–∏: —Ç–æ–ª—å–∫–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä—É
   - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–∏—Ö —Ç–æ—á–µ–∫
   - –û—Ç–∑—ã–≤—ã: —Ç–æ–ª—å–∫–æ –æ —Å–≤–æ–∏—Ö —Ç–æ—á–∫–∞—Ö

2. **–ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ:**
   - –í—Å–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —Ç–æ—á–∫–∏
   - –í—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - –í—Å–µ –æ—Ç–∑—ã–≤—ã

3. **UI –∞–¥–∞–ø—Ç–∞—Ü–∏—è:**
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è
   - –°–∫—Ä—ã—Ç—ã–µ/–ø–æ–∫–∞–∑–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø—É—Ç–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- ‚úÖ –ü–∞—Ä—Ç–Ω–µ—Ä—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ê–¥–º–∏–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- ‚úÖ UI –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –∫–∞–∂–¥—É—é —Ä–æ–ª—å
- ‚úÖ –§–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≠—Ç–∞–ø–∞ 1:

1. **–≠—Ç–∞–ø 2:** Reviews, Operators, Analytics
2. **–≠—Ç–∞–ø 3:** –§–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. **–≠—Ç–∞–ø 4:** –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã
4. **–≠—Ç–∞–ø 5:** –†–æ–ª–µ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤ UI

---

**–í—Ä–µ–º—è –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≠—Ç–∞–ø–∞ 1:** ~1.5 —á–∞—Å–∞  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:** –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ 