# –û—Ç—á–µ—Ç: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–ø–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ –∫–∞–Ω–∞–ª–∞–º

## üìã –ü—Ä–æ–±–ª–µ–º–∞
–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/notifications/templates/70/edit` –≤ —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegram —à–∞–±–ª–æ–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –∫–∞–Ω–∞–ª "Email" –≤–º–µ—Å—Ç–æ "Telegram", –∞ —Ç–∞–∫–∂–µ –≤—Å–µ –∫–∞–Ω–∞–ª—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π.

## üéØ –ó–∞–¥–∞—á–∏
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ –≤ —Ñ–æ—Ä–º–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å–ø–∏—Å–∫–∏ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É —Ç–∏–ø–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–∞–Ω–∞–ª–∞
4. ‚úÖ –°–±—Ä–∞—Å—ã–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∏–ø –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–∞–Ω–∞–ª–∞

## üîß –†–µ—à–µ–Ω–∏—è

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. –ú–æ–¥–µ–ª—å EmailTemplate
```ruby
# –¢–∏–ø—ã —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ –∫–∞–Ω–∞–ª–∞–º
def self.template_types_for_channel(channel_type)
  case channel_type.to_s
  when 'email'
    {
      'booking_confirmation' => '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è',
      'booking_cancelled' => '–û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è', 
      'booking_reminder' => '–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–ø–∏—Å–∏',
      'service_completed' => '–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è',
      'review_request' => '–ó–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞',
      'user_welcome' => '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
      'password_reset' => '–°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è',
      'newsletter' => '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞'
    }
  when 'telegram'
    {
      'booking_confirmation' => '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è',
      'booking_cancelled' => '–û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è',
      'booking_reminder' => '–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–ø–∏—Å–∏', 
      'service_completed' => '–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è',
      'review_request' => '–ó–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞',
      'newsletter' => '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞'
    }
  when 'push'
    {
      'booking_confirmation' => '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è',
      'booking_cancelled' => '–û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è',
      'booking_reminder' => '–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–ø–∏—Å–∏',
      'service_completed' => '–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è',
      'review_request' => '–ó–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞'
    }
  else
    template_types
  end
end
```

#### 2. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä EmailTemplatesController
```ruby
# GET /api/v1/email_templates/template_types
def template_types
  channel_type = params[:channel_type] || 'email'
  types_array = EmailTemplate.template_types_for_channel(channel_type).map do |key, label|
    { value: key, label: label }
  end
  
  render json: {
    data: types_array,
    available_languages: %w[uk ru en],
    channel_type: channel_type
  }
end
```

### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. API emailTemplates.api.ts
```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤
getTemplateTypes: builder.query<{ data: TemplateType[]; channel_type?: string }, { channel_type?: string } | void>({
  query: (params = {}) => {
    const urlParams = new URLSearchParams();
    if (params && 'channel_type' in params && params.channel_type) {
      urlParams.append('channel_type', params.channel_type);
    }
    return `email_templates/template_types${urlParams.toString() ? `?${urlParams.toString()}` : ''}`;
  },
}),
```

#### 2. EmailTemplateFormPage.tsx
```typescript
// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∫–∞–Ω–∞–ª–∞ (–¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–ø–æ–≤)
const [selectedChannelType, setSelectedChannelType] = useState<string>('email');

// API —Ö—É–∫–∏
const { data: templateTypesData } = useGetTemplateTypesQuery({ 
  channel_type: selectedChannelType 
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞
const handleChannelChange = (event: SelectChangeEvent<string>) => {
  const newChannelType = event.target.value;
  setSelectedChannelType(newChannelType);
  formik.setFieldValue('channel_type', newChannelType);
  // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–∏–ø —à–∞–±–ª–æ–Ω–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–∞–Ω–∞–ª–∞
  formik.setFieldValue('template_type', '');
};

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
useEffect(() => {
  if (isEditMode && templateData?.data) {
    const template = templateData.data;
    const channelType = template.channel_type || 'email';
    setSelectedChannelType(channelType);
    
    formik.setValues({
      // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
      channel_type: channelType,
    });
  }
}, [templateData, isEditMode]);
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –ø–æ –∫–∞–Ω–∞–ª–∞–º:

#### üìß Email (8 —Ç–∏–ø–æ–≤):
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–ø–∏—Å–∏
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- –ó–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞

#### üì± Telegram (6 —Ç–∏–ø–æ–≤):
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–ø–∏—Å–∏
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- –ó–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞

#### üîî Push (5 —Ç–∏–ø–æ–≤):
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—Ç–º–µ–Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –∑–∞–ø–∏—Å–∏
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- –ó–∞–ø—Ä–æ—Å –æ—Ç–∑—ã–≤–∞

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞**: ‚úÖ
   - –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ `/admin/notifications/templates/70/edit` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "Telegram"

2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∏–ø–æ–≤**: ‚úÖ
   - –ü—Ä–∏ —Å–º–µ–Ω–µ –∫–∞–Ω–∞–ª–∞ —Å–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - Email –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 8 —Ç–∏–ø–æ–≤, Telegram - 6, Push - 5

3. **–°–±—Ä–æ—Å —Ç–∏–ø–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–∞–Ω–∞–ª–∞**: ‚úÖ
   - –ü—Ä–∏ —Å–º–µ–Ω–µ –∫–∞–Ω–∞–ª–∞ –ø–æ–ª–µ "–¢–∏–ø —à–∞–±–ª–æ–Ω–∞" –æ—á–∏—â–∞–µ—Ç—Å—è
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∏–ø –¥–ª—è –Ω–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞

4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏**: ‚úÖ
   - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ –∫–∞–Ω–∞–ª –∏ —Ç–∏–ø—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üîÑ –ö–æ–º–º–∏—Ç
```
b707199 - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–∏–ø–æ–≤ —à–∞–±–ª–æ–Ω–æ–≤ –ø–æ –∫–∞–Ω–∞–ª–∞–º
```

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **–õ–æ–≥–∏—á–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –∫–∞–Ω–∞–ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
- **UX**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å —Ç–∏–ø–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫–∏
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã –∏ —Ç–∏–ø—ã
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–æ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ö 