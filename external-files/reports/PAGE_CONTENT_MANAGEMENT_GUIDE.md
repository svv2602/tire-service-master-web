# 📖 Руководство по управлению контентом страниц

## 🎯 Обзор системы

Система управления контентом страниц позволяет администраторам редактировать содержимое клиентских страниц без изменения кода. Вы можете управлять текстами, изображениями, настройками и структурой страниц через удобный веб-интерфейс.

## 🚀 Доступ к системе

### Требования:
- **Роль:** Администратор (admin) или Супер-администратор (super_admin)
- **URL:** `/page-content`
- **Навигация:** Главное меню → "Управление контентом"

### Доступные страницы:
- `/page-content` - Список всего контента
- `/page-content/new` - Создание нового контента
- `/page-content/:id/edit` - Редактирование существующего контента
- `/page-content/management` - Расширенное управление

## 📋 Типы контента

### 1. **Hero (Главный баннер)** 🎯
**Назначение:** Основная секция в верхней части страницы
**Поля:**
- `title` - Основной заголовок
- `content` - Подзаголовок/описание
- `settings.subtitle` - Дополнительный подзаголовок
- `settings.button_text` - Текст кнопки
- `settings.search_placeholder` - Плейсхолдер поиска
- `settings.city_placeholder` - Плейсхолдер города

**Пример использования:**
```
Заголовок: "Знайдіть найкращий шиномонтаж поруч з вами"
Контент: "Швидке бронювання, перевірені майстри, гарантія якості"
```

### 2. **Service (Услуга)** 🔧
**Назначение:** Отображение популярных услуг
**Поля:**
- `title` - Название услуги
- `content` - Описание услуги
- `settings.price` - Цена (например, "від 150 ₴")
- `settings.duration` - Длительность (например, "30 хв")
- `settings.icon` - Иконка (tire, balance, repair, mount)

**Динамические данные:** Автоматически подтягиваются услуги из базы данных по категории

### 3. **City (Город)** 🏙️
**Назначение:** Отображение доступных городов
**Поля:**
- `title` - Название города
- `content` - Описание
- `settings.region` - Регион
- `settings.service_points_count` - Количество сервисных точек

**Динамические данные:** Автоматически подтягиваются города с активными сервисными точками

### 4. **Article (Статья)** 📝
**Назначение:** Отображение статей из базы знаний
**Поля:**
- `title` - Заголовок статьи
- `content` - Краткое описание
- `settings.read_time` - Время чтения
- `settings.author` - Автор
- `settings.category` - Категория

**Динамические данные:** Автоматически подтягиваются опубликованные статьи

### 5. **CTA (Призыв к действию)** 📢
**Назначение:** Секция с призывом к действию
**Поля:**
- `title` - Заголовок призыва
- `content` - Описание
- `settings.primary_button_text` - Текст основной кнопки
- `settings.secondary_button_text` - Текст дополнительной кнопки

### 6. **Text Block (Текстовый блок)** 📄
**Назначение:** Универсальные текстовые блоки
**Поля:**
- `title` - Заголовок
- `content` - Содержимое
- `settings.type` - Тип блока (cities_list, footer)
- `settings.alignment` - Выравнивание

## 🏗️ Секции страниц

### 1. **client_main** - Главная страница клиента
**Описание:** Основная страница, которую видят клиенты
**Используемые типы контента:**
- Hero (позиция 1)
- Text Block для городов (позиция 2)
- Service (позиции 10-20)
- Article (позиции 30-40)
- CTA (позиция 40)
- Footer (позиция 50)

### 2. **admin_dashboard** - Панель администратора
**Описание:** Контент для административной панели

### 3. **partner_portal** - Портал партнера
**Описание:** Контент для партнерского портала

### 4. **knowledge_base** - База знаний
**Описание:** Контент для страниц базы знаний

### 5. **about** - О нас
**Описание:** Страница "О компании"

### 6. **contacts** - Контакты
**Описание:** Страница контактов

## 🛠️ Инструкции по использованию

### Создание нового контента

1. **Переход к созданию:**
   - Откройте `/page-content`
   - Нажмите кнопку "Создать контент"

2. **Заполнение формы:**
   ```
   Секция: client_main (выберите нужную)
   Тип контента: hero (выберите подходящий)
   Заголовок: Введите заголовок
   Контент: Введите основной текст
   Позиция: Укажите порядок отображения
   Активность: Включено/Выключено
   Язык: uk (украинский) / ru (русский)
   ```

3. **Настройки (settings):**
   - Заполните дополнительные поля в зависимости от типа контента
   - Для Hero: subtitle, button_text, search_placeholder
   - Для Service: price, duration, icon
   - Для CTA: primary_button_text, secondary_button_text

4. **Сохранение:**
   - Нажмите "Создать"
   - Контент появится на соответствующей странице

### Редактирование существующего контента

1. **Поиск контента:**
   - Откройте `/page-content`
   - Используйте поиск по заголовку или содержимому
   - Фильтруйте по активности

2. **Редактирование:**
   - Нажмите кнопку "Редактировать" на карточке контента
   - Измените необходимые поля
   - Нажмите "Обновить"

3. **Быстрые действия:**
   - **Переключение активности:** Кнопка глаза на карточке
   - **Удаление:** Кнопка корзины (с подтверждением)

### Управление позициями

**Позиции определяют порядок отображения контента:**
- 1-9: Верхние секции (Hero, навигация)
- 10-29: Основной контент (услуги, города)
- 30-39: Дополнительный контент (статьи)
- 40-49: Призывы к действию
- 50+: Футер и нижние секции

### Работа с изображениями

1. **Основное изображение:**
   - Поле `image_url` - URL изображения
   - Поддерживаются форматы: JPG, PNG, WebP
   - Рекомендуемый размер: 1200x600px

2. **Галерея изображений:**
   - Поле `gallery_images` - массив URL изображений
   - Используется для слайдеров и галерей

## 🌐 Мультиязычность

### Поддерживаемые языки:
- **uk** - Украинский (основной)
- **ru** - Русский

### Создание контента на разных языках:
1. Создайте контент для украинского языка (`language: 'uk'`)
2. Создайте аналогичный контент для русского языка (`language: 'ru'`)
3. Используйте одинаковые `section`, `content_type` и `position`

## 🔧 API и интеграция

### Основные эндпоинты:
```
GET /api/v1/page_contents - Получение списка контента
GET /api/v1/page_contents/:id - Получение конкретного контента
POST /api/v1/page_contents - Создание контента
PUT /api/v1/page_contents/:id - Обновление контента
DELETE /api/v1/page_contents/:id - Удаление контента
```

### Фильтрация:
```
?section=client_main - По секции
?content_type=hero - По типу контента
?language=uk - По языку
?active=true - По активности
?search=текст - Поиск по тексту
```

### Использование в компонентах:
```typescript
// Получение контента главной страницы
const { data: pageContentData } = useGetPageContentsQuery({
  section: 'client_main',
  language: 'uk'
});

// Фильтрация по типу
const heroContent = pageContentData?.data?.find(
  item => item.content_type === 'hero'
);
```

## 📊 Динамические данные

### Автоматическое обновление:
Некоторые типы контента автоматически подтягивают актуальные данные:

1. **Service:** Услуги из базы данных по категории
2. **City:** Города с активными сервисными точками
3. **Article:** Опубликованные статьи из базы знаний

### Настройка динамических данных:
- Для Service: укажите `settings.category` для фильтрации
- Для City: данные обновляются автоматически
- Для Article: данные обновляются автоматически

## ⚠️ Важные замечания

### Безопасность:
- Доступ только для администраторов
- Валидация всех входных данных
- Защита от XSS атак

### Производительность:
- Кэширование контента на клиенте
- Ленивая загрузка изображений
- Пагинация для больших списков

### Резервное копирование:
- Контент хранится в базе данных
- Регулярные бэкапы через seeds
- Возможность экспорта/импорта

## 🚨 Устранение неполадок

### Контент не отображается:
1. Проверьте активность контента (`active: true`)
2. Убедитесь в правильности секции и языка
3. Проверьте позицию (должна быть > 0)

### Изображения не загружаются:
1. Проверьте корректность URL
2. Убедитесь в доступности изображения
3. Проверьте CORS настройки

### Динамические данные не обновляются:
1. Проверьте настройки в поле `settings`
2. Убедитесь в наличии данных в базе
3. Проверьте фильтры (активность, статус)

## 📈 Рекомендации

### Лучшие практики:
1. **Используйте понятные заголовки** для легкого поиска
2. **Группируйте контент по позициям** для логичной структуры
3. **Тестируйте изменения** на разных устройствах
4. **Создавайте резервные копии** перед крупными изменениями
5. **Используйте украинский язык** как основной

### Оптимизация:
1. **Сжимайте изображения** для быстрой загрузки
2. **Используйте короткие описания** для лучшего UX
3. **Группируйте похожий контент** по секциям
4. **Регулярно обновляйте** устаревшую информацию

---

**Дата создания:** 15 июня 2025  
**Версия:** 1.0  
**Автор:** AI Assistant  

Для получения дополнительной помощи обращайтесь к техническому администратору. 