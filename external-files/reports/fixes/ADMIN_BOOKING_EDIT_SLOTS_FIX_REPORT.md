# üîß –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏ –ø–æ–¥—Å—á–µ—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –∞–¥–º–∏–Ω—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/admin/bookings/7/edit` –≤ —Å–ª–æ—Ç–∞—Ö –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –æ—Ç—Ä–µ–∑–∫–∞–º –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ:
- **–ü–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å:** "1 –∏–∑ 1 —Å–≤–æ–±–æ–¥–Ω–æ"
- **–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:** "1 –∏–∑ 2 —Å–≤–æ–±–æ–¥–Ω–æ" (—Ç–∞–∫ –∫–∞–∫ –ø–æ—Å—Ç–æ–≤ 2)

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

–í —Ñ–∞–π–ª–µ `BookingFormPage.tsx` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö API –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ `AvailabilitySelector`. –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å—á–∏—Ç–∞–ª–∞ –∫–∞–∂–¥—ã–π —Å–ª–æ—Ç –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Å—Ç, –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ API.

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):

```typescript
// –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Å–ª–æ—Ç—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞—á–∞–ª–∞ –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤
const groupedByTime = availabilityData.slots.reduce((acc, slot) => {
  const timeKey = slot.start_time;
  
  if (!acc[timeKey]) {
    acc[timeKey] = {
      time: timeKey,
      available_posts: 0,
      total_posts: 0,
      duration_minutes: slot.duration_minutes,
      can_book: true
    };
  }
  
  acc[timeKey].available_posts += 1;  // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!
  acc[timeKey].total_posts += 1;      // ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!
  
  return acc;
}, {} as Record<string, AvailableTimeSlot>);
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∂–¥—ã–π —Å–ª–æ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–ª —Å—á–µ—Ç—á–∏–∫–∏ –Ω–∞ +1, –Ω–æ API —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `available_posts`, `total_posts`, `bookings_count`.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π API:

```typescript
// ‚úÖ –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å–ª–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—è –Ω–æ–≤—ã–µ –ø–æ–ª—è API
const availableTimeSlots = useMemo(() => {
  if (!availabilityData?.slots || availabilityData.slots.length === 0) {
    return [];
  }

  // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å–ª–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—è –Ω–æ–≤—ã–µ –ø–æ–ª—è API
  return availabilityData.slots.map(slot => ({
    time: slot.start_time,
    available_posts: slot.available_posts || 0,    // ‚úÖ –ò–∑ API
    total_posts: slot.total_posts || 0,            // ‚úÖ –ò–∑ API
    bookings_count: slot.bookings_count || 0,      // ‚úÖ –ò–∑ API
    duration_minutes: slot.duration_minutes,
    can_book: (slot.available_posts || 0) > 0
  })).sort((a, b) => a.time.localeCompare(b.time));
}, [availabilityData]);
```

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### Frontend (tire-service-master-web)

**–§–∞–π–ª:** `src/pages/bookings/BookingFormPage.tsx`

1. **–£–±—Ä–∞–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–ª–æ—Ç–æ–≤** - —É–¥–∞–ª–µ–Ω –∫–æ–¥ —Å `reduce()` –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—á–∏—Ç–∞–ª –∫–∞–∂–¥—ã–π —Å–ª–æ—Ç –∫–∞–∫ +1
2. **–î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π API** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `available_posts`, `total_posts`, `bookings_count` –∏–∑ API
3. **–£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞** - –ø—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞ —Å–ª–æ—Ç–æ–≤ –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Endpoint:** `GET /api/v1/availability/slots_for_category?service_point_id=6&category_id=1&date=2025-07-05`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–ª—è `available_posts`, `total_posts`, `bookings_count`

### UI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°—Ç—Ä–∞–Ω–∏—Ü–∞:** `/admin/bookings/7/edit`
- **–î–µ–π—Å—Ç–≤–∏—è:** –ù–∞–∂–∞—Ç—å "–ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è" ‚Üí –≤—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É 5 –∏—é–ª—è 2025 ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª–æ—Ç—ã
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–ª–æ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "1 –∏–∑ 2 —Å–≤–æ–±–æ–¥–Ω–æ")

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ `BookingFormPage.tsx`
- –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–ª—è API: `available_posts`, `total_posts`, `bookings_count`
- –£–±—Ä–∞–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–ª–æ—Ç–æ–≤

‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°–ª–æ—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è: "X –∏–∑ Y —Å–≤–æ–±–æ–¥–Ω–æ" –≥–¥–µ Y - —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–æ–≤
- –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ (–æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞)

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `tire-service-master-web/src/pages/bookings/BookingFormPage.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- `tire-service-master-web/external-files/testing/test_admin_booking_edit_slots_fix.html` - —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
- `tire-service-master-web/external-files/reports/fixes/ADMIN_BOOKING_EDIT_SLOTS_FIX_REPORT.md` - –¥–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç

## üìÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–º–∏—Ç–µ

- **–ö–æ–º–º–∏—Ç:** `12d20c7`
- **–°–æ–æ–±—â–µ–Ω–∏–µ:** "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ–¥—Å—á–µ—Ç–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –∞–¥–º–∏–Ω—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"
- **–î–∞—Ç–∞:** 2025-01-07
- **–í–µ—Ç–∫–∞:** `feature/booking-improvements`

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å frontend (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/admin/bookings/7/edit`
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–ª–æ—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –¥–∞—Ç–∞–º–∏ –∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏ 