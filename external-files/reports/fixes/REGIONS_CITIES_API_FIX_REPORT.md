# –û—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API –¥–ª—è —Ä–µ–≥–∏–æ–Ω–æ–≤ –∏ –≥–æ—Ä–æ–¥–æ–≤

## üêõ –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–≥–∏–æ–Ω–∞ (http://localhost:3008/regions/10/edit) –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ 400 (Bad Request).

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º:

### –ë—ç–∫–µ–Ω–¥ (Rails –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã)
```ruby
# RegionsController
def region_params
  params.require(:region).permit(:name, :code, :is_active)
end

# CitiesController  
def city_params
  params.require(:city).permit(:name, :region_id, :is_active)
end
```

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
```typescript
// regions.api.ts - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
updateRegion: builder.mutation<Region, { id: number; region: Partial<Region> }>({
  query: ({ id, region }) => ({
    url: `regions/${id}`,
    method: 'PUT',
    body: region, // ‚ùå –û—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å: { name: "...", code: "..." }
  }),
}),
```

Rails –æ–∂–∏–¥–∞–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—É: `{ region: { name: "...", code: "..." } }`  
–ê –ø–æ–ª—É—á–∞–ª: `{ name: "...", code: "..." }`

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –§–∞–π–ª: `src/api/regions.api.ts`
```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞
createRegion: builder.mutation<Region, Partial<Region>>({
  query: (region) => ({
    url: 'regions',
    method: 'POST',
    body: { region }, // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞
  }),
}),

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞
updateRegion: builder.mutation<Region, { id: number; region: Partial<Region> }>({
  query: ({ id, region }) => ({
    url: `regions/${id}`,
    method: 'PUT',
    body: { region }, // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞
  }),
}),
```

### –§–∞–π–ª: `src/api/cities.api.ts`
```typescript
// –°–æ–∑–¥–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
createCity: builder.mutation<{ data: City }, Partial<City>>({
  query: (city) => ({
    url: 'cities',
    method: 'POST',
    body: { city }, // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞
  }),
}),

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–∞
updateCity: builder.mutation<{ data: City }, { id: number; city: Partial<City> }>({
  query: ({ id, city }) => ({
    url: `cities/${id}`,
    method: 'PUT',
    body: { city }, // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞
  }),
}),
```

## üîß –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ API
### ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ (—É–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –æ–±–µ—Ä—Ç–∫—É):
- **Partners API**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `{ partner: data }`
- **Services API**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `{ service: data }` –∏ `{ service_category: data }`
- **Car Brands API**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç FormData –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ:
- **Regions API**: —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `{ region: data }`
- **Cities API**: —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `{ city: data }`

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–æ–≤ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Rails Strong Parameters

## üöÄ –ö–æ–º–º–∏—Ç
**7eac877** - fix: –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ–±–µ—Ä—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö –≤ regions –∏ cities API –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è Rails –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º

## üí° –£—Ä–æ–∫
–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Rails API –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `params.require()` –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –∏ —É–±–µ–∂–¥–∞–π—Ç–µ—Å—å, —á—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ–∂–∏–¥–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±–µ—Ä—Ç–∫–æ–π. 