# –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ —Å—Ç–∞—Ç–µ–π –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–î–∞—Ç–∞:** 26 –¥–µ–∫–∞–±—Ä—è 2024  
**–ó–∞–¥–∞—á–∞:** –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å 3 –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏, –¥–æ–ø–æ–ª–Ω—è—è –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ  
**–§–∞–π–ª—ã:** useMainPageArticles.ts, ClientMainPage.tsx, articles.api.ts  

## üéØ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–µ–π –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/client`:**
1. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å 3 –ø–æ—Å–ª–µ–¥–Ω–∏–µ (–ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è) —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
2. –ï—Å–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö –º–µ–Ω—å—à–µ 3, –∑–∞–º–µ—â–∞—Ç—å –∏—Ö –º–µ—Å—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è
3. –ò—Å–∫–ª—é—á–∞—Ç—å –¥—É–±–ª–∏ (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–¥–Ω—É —Å—Ç–∞—Ç—å—é –¥–≤–∞–∂–¥—ã)
4. –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–æ–≤–Ω–æ 3 —Å—Ç–∞—Ç—å–∏

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ù–æ–≤—ã–π —Ö—É–∫ useMainPageArticles
**–§–∞–π–ª:** `tire-service-master-web/src/hooks/useMainPageArticles.ts`

```typescript
export const useMainPageArticles = () => {
  // –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
  const { data: featuredData, isLoading: featuredLoading, error: featuredError } = useGetFeaturedArticlesQuery();

  // –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ)
  const { data: recentData, isLoading: recentLoading, error: recentError } = useGetArticlesQuery({
    status: 'published',
    featured: false,
    per_page: 10,
  });

  // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  const articles = useMemo(() => {
    const featuredArticles = featuredData?.data || [];
    const recentArticles = recentData?.data || [];

    // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è (desc)
    const sortedFeatured = [...featuredArticles]
      .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())
      .slice(0, 3);

    // –ï—Å–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Ö
    if (sortedFeatured.length === 3) {
      return sortedFeatured;
    }

    // –î–æ–ø–æ–ª–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ —Å—Ç–∞—Ç—å—è–º–∏
    const needMore = 3 - sortedFeatured.length;
    const featuredIds = new Set(sortedFeatured.map(article => article.id));
    const filteredRecent = recentArticles
      .filter(article => !featuredIds.has(article.id))
      .sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime())
      .slice(0, needMore);

    return [...sortedFeatured, ...filteredRecent];
  }, [featuredData, recentData]);

  return { articles, isLoading: featuredLoading || recentLoading, error: featuredError || recentError };
};
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
**–§–∞–π–ª:** `tire-service-master-web/src/pages/client/ClientMainPage.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ó–∞–º–µ–Ω–µ–Ω `useGetFeaturedArticlesQuery()` –Ω–∞ `useMainPageArticles()`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ fallback –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç–∏–ø—É Article
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–µ–π –≤ —É—Å–ª–æ–≤–∏–µ `if (contentLoading || citiesLoading || articlesLoading)`

```typescript
// –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—å–∏ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–º)
const { articles: mainPageArticles, isLoading: articlesLoading } = useMainPageArticles();

// –î–ª—è —Å—Ç–∞—Ç–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö
const currentArticles = mainPageArticles.length > 0 ? mainPageArticles : [/* fallback –¥–∞–Ω–Ω—ã–µ */];
```

### 3. API –ø–æ–¥–¥–µ—Ä–∂–∫–∞
**–§–∞–π–ª:** `tire-service-master-web/src/api/articles.api.ts`

- –î–æ–±–∞–≤–ª–µ–Ω endpoint `getMainPageArticles` (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∏—Ç–æ–≥–æ–≤–æ–º —Ä–µ—à–µ–Ω–∏–∏)
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `featured: true/false`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### API –ø—Ä–æ–≤–µ—Ä–∫–∞:
```bash
# –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
curl "http://localhost:8000/api/v1/articles?featured=true&status=published&per_page=3"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 3 —Å—Ç–∞—Ç—å–∏

# –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏  
curl "http://localhost:8000/api/v1/articles?featured=false&status=published&per_page=3"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 3 —Å—Ç–∞—Ç—å–∏
```

### –¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
- **–í—Å–µ–≥–æ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö:** 6 —Å—Ç–∞—Ç–µ–π
- **–í—Å–µ–≥–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö:** –º–Ω–æ–∂–µ—Å—Ç–≤–æ
- **–õ–æ–≥–∏–∫–∞:** –ë–µ—Ä–µ–º 3 –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)

### –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:
`tire-service-master-web/external-files/testing/html/test_main_page_articles_logic.html`

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
1. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ 3+ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º 3 –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ
2. –ü—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö - –¥–æ–ø–æ–ª–Ω—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ —Å—Ç–∞—Ç—å—è–º–∏
3. –ò—Å–∫–ª—é—á–∞–µ–º –¥—É–±–ª–∏ —á–µ—Ä–µ–∑ Set —Å ID —Å—Ç–∞—Ç–µ–π
4. –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–æ–≤–Ω–æ 3 —Å—Ç–∞—Ç—å–∏

‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 2 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö API –∑–∞–ø—Ä–æ—Å–∞
- –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ useMemo –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ RTK Query

‚úÖ **–¢–∏–ø–∏–∑–∞—Ü–∏—è:**
- –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è TypeScript
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Article
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫

## üìä –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã

| –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö | –ü–æ—Å–ª–µ–¥–Ω–∏—Ö | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------------|-----------|-----------|
| 3+ | –ª—é–±–æ–µ | 3 –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ |
| 2 | 1+ | 2 —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ + 1 –ø–æ—Å–ª–µ–¥–Ω—è—è |
| 1 | 2+ | 1 —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è + 2 –ø–æ—Å–ª–µ–¥–Ω–∏–µ |
| 0 | 3+ | 3 –ø–æ—Å–ª–µ–¥–Ω–∏–µ |

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É 