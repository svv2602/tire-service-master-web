# Отчет об исправлении валидации профиля клиента

## Проблема
На странице `/client/profile` при сохранении/обновлении профиля требовалось обязательное заполнение email, даже если был указан телефон. Это противоречило логике бэкенда, где валидация требует наличия хотя бы одного из контактных данных (email или телефон).

## Анализ
1. **Бэкенд (модель User)** уже имел правильную валидацию:
   ```ruby
   # Валидация: email ИЛИ телефон обязателен
   validate :email_or_phone_present
   
   def email_or_phone_present
     if email.blank? && phone.blank?
       errors.add(:base, 'Необходимо указать email или номер телефона')
     end
   end
   ```

2. **Фронтенд (ClientProfilePage.tsx)** требовал заполнения обоих полей:
   ```javascript
   email: Yup.string()
     .email('Неверный формат email')
     .required('Email обязателен для заполнения'),
   phone: Yup.string()
     .min(10, 'Номер телефона должен содержать минимум 10 цифр')
     .matches(/^[\d\s\+\-\(\)]+$/, '...')
     .required('Номер телефона обязателен'),
   ```

## Внесенные изменения

### 1. Исправлена валидация в ClientProfilePage.tsx
Заменены `.required()` на кастомные тесты, которые проверяют наличие хотя бы одного заполненного поля:

```javascript
email: Yup.string()
  .email('Неверный формат email')
  .test('email-or-phone', 'Необходимо указать email или номер телефона', function(value) {
    return value || this.parent.phone;
  }),
phone: Yup.string()
  .min(10, 'Номер телефона должен содержать минимум 10 цифр')
  .matches(/^[\d\s\+\-\(\)]+$/, 'Номер телефона может содержать только цифры, пробелы и символы +, -, (, )')
  .test('phone-or-email', 'Необходимо указать email или номер телефона', function(value) {
    return value || this.parent.email;
  }),
```

### 2. Добавлено информационное сообщение
Для улучшения UX добавлено информационное сообщение, объясняющее пользователю требования к заполнению формы:

```jsx
<Alert severity="info" sx={{ mb: 3 }}>
  Для связи с вами необходимо указать хотя бы одно из контактных данных: email или номер телефона.
</Alert>
```

## Результат
- Пользователь может обновить профиль, указав только email ИЛИ только телефон
- Понятное информационное сообщение объясняет требования к заполнению формы
- Валидация на фронтенде теперь соответствует валидации на бэкенде
- Улучшен UX за счет более гибких требований к заполнению формы

## Затронутые файлы
- `tire-service-master-web/src/pages/client/ClientProfilePage.tsx` 