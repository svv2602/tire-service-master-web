# üéØ –û–¢–ß–ï–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–∏–ø–∞ –≤—Ö–æ–¥–∞ –≤ —Ñ–æ—Ä–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∞–¥–º–∏–Ω–∫–µ (`/admin/users/new` –∏ `/admin/users/{id}/edit`) —Ñ–æ—Ä–º–∞ —Ç—Ä–µ–±–æ–≤–∞–ª–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ email, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—Ç–µ–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω –¥–ª—è –≤—Ö–æ–¥–∞.

### –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
- ‚ùå Email –≤—Å–µ–≥–¥–∞ –±—ã–ª –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–æ–ª–µ–º
- ‚ùå –ù–µ–ª—å–∑—è –±—ã–ª–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–æ–ª—å–∫–æ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –≤—Ö–æ–¥–∞ (email/—Ç–µ–ª–µ—Ñ–æ–Ω)
- ‚ùå –ù–µ–≥–∏–±–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –≤—Ö–æ–¥–∞
```typescript
// –°–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ç–∏–ø–∞ –≤—Ö–æ–¥–∞
const [loginType, setLoginType] = React.useState<'email' | 'phone'>('email');

// RadioGroup –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏)
{!isEdit && (
  <FormControl component="fieldset">
    <FormLabel component="legend">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –≤—Ö–æ–¥–∞</FormLabel>
    <RadioGroup
      row
      value={loginType}
      onChange={handleLoginTypeChange}
    >
      <FormControlLabel value="email" control={<Radio />} label="Email" />
      <FormControlLabel value="phone" control={<Radio />} label="–¢–µ–ª–µ—Ñ–æ–Ω" />
    </RadioGroup>
  </FormControl>
)}
```

### 2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
```typescript
const getValidationSchema = (loginType: 'email' | 'phone') => {
  return yup.object({
    email: loginType === 'email' 
      ? yup.string().email('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email').required('Email –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω')
      : yup.string().email('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email').nullable(),
    phone: loginType === 'phone' 
      ? phoneValidation.required('–¢–µ–ª–µ—Ñ–æ–Ω –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω')
      : phoneValidation,
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  });
};
```

### 3. –£—Å–ª–æ–≤–Ω—ã–µ –ª–µ–π–±–ª—ã –ø–æ–ª–µ–π
```typescript
// Email –ø–æ–ª–µ
<TextField
  required={loginType === 'email'}
  label={loginType === 'email' ? 'Email' : 'Email (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)'}
  // ...
/>

// –¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª–µ  
<PhoneField
  required={loginType === 'phone'}
  label={loginType === 'phone' ? '–¢–µ–ª–µ—Ñ–æ–Ω' : '–¢–µ–ª–µ—Ñ–æ–Ω (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)'}
  // ...
/>
```

### 4. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
```typescript
useEffect(() => {
  if (isEdit && userData?.data) {
    const user = userData.data;
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –≤—Ö–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ–ª–µ–π
    if (user.email && !user.phone) {
      setLoginType('email');
    } else if (user.phone && !user.email) {
      setLoginType('phone');
    } else if (user.email && user.phone) {
      // –ï—Å–ª–∏ –æ–±–∞ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç email
      setLoginType('email');
    }
  }
}, [isEdit, userData]);
```

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
```typescript
const getRequiredFieldErrors = () => {
  const requiredFields = {
    ...(loginType === 'email' && { email: 'Email' }),
    ...(loginType === 'phone' && { phone: '–¢–µ–ª–µ—Ñ–æ–Ω' }),
    first_name: '–ò–º—è', 
    last_name: '–§–∞–º–∏–ª–∏—è',
    role_id: '–†–æ–ª—å',
    ...((!isEdit) && { password: '–ü–∞—Ä–æ–ª—å' })
  };
  // ...
};
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `src/pages/users/UserForm.tsx` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º—ã

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `RadioGroup` –∏ `FormLabel` –∏–∑ MUI
- –°–æ—Å—Ç–æ—è–Ω–∏–µ `loginType`
- –§—É–Ω–∫—Ü–∏—è `getValidationSchema()`
- –§—É–Ω–∫—Ü–∏—è `handleLoginTypeChange()`

### –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
1. **–í—ã–±–æ—Ä —Ç–∏–ø–∞ –≤—Ö–æ–¥–∞** - —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - —Å—Ö–µ–º–∞ –º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞
3. **–£—Å–ª–æ–≤–Ω—ã–µ –ª–µ–π–±–ª—ã** - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" –¥–ª—è –Ω–µ–æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ–ª—è
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** - –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–∏–ø –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ –¥–∞–Ω–Ω—ã–º
5. **–û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∏–ø–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å Email** - –≤—ã–±–æ—Ä Email, –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ email + –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å –¢–µ–ª–µ—Ñ–æ–Ω–æ–º** - –≤—ã–±–æ—Ä –¢–µ–ª–µ—Ñ–æ–Ω, –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ + –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –Ω–µ–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—è—Ö
4. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞
5. **–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∏–ø–∞** - –æ—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∏–ø–∞

### –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:
- `external-files/testing/test_user_form_login_type_validation.html`

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–æ–ª—å–∫–æ —Å email
- ‚úÖ –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–æ–ª—å–∫–æ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º  
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –≤—ã–±–æ—Ä–æ–º —Ç–∏–ø–∞ –≤—Ö–æ–¥–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ª–µ–π–±–ª—ã –ø–æ–ª–µ–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ/–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

### üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- **–ì–∏–±–∫–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ö–æ–¥–∞
- **UX** - –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ç–∏–ø—É
- **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –µ–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å —Ñ–æ—Ä–º–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤:
- `src/pages/auth/RegisterPage.tsx` - —Ñ–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π:
- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤  
- –î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ–æ—Ä–º—ã

---

**–î–∞—Ç–∞:** 2025-07-04  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** üß™ –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ 