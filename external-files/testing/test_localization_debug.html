<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–æ—Ä–æ–¥–æ–≤</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { 
            border: 1px solid #ccc; 
            margin: 10px 0; 
            padding: 15px; 
            border-radius: 5px; 
        }
        .result { 
            font-weight: bold; 
            color: #333; 
        }
        .error { color: red; }
        .success { color: green; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>üåç –¢–µ—Å—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–æ—Ä–æ–¥–æ–≤</h1>
    
    <div class="test-case">
        <h3>–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞</h3>
        <div id="city-data"></div>
    </div>
    
    <div class="test-case">
        <h3>–¢–µ–∫—É—â–∏–π —è–∑—ã–∫ –∏–∑ localStorage</h3>
        <div id="current-language"></div>
    </div>
    
    <div class="test-case">
        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞</h3>
        <div id="ru-result"></div>
    </div>
    
    <div class="test-case">
        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ —è–∑—ã–∫–∞</h3>
        <div id="uk-result"></div>
    </div>
    
    <div class="test-case">
        <h3>–¢–µ—Å—Ç —Å–º–µ–Ω—ã —è–∑—ã–∫–∞</h3>
        <button onclick="setLanguage('ru')">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä—É—Å—Å–∫–∏–π</button>
        <button onclick="setLanguage('uk')">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π</button>
        <button onclick="testLocalization()">–ü–µ—Ä–µ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <script>
        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ (–∫–∞–∫ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ API)
        const testCity = {
            id: 67,
            name: "–ö–∏—ó–≤",
            name_ru: "–ö–∏–µ–≤", 
            name_uk: "–ö–∏—ó–≤"
        };

        // –õ–æ–≥–∏–∫–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (–∫–æ–ø–∏—è –∏–∑ localizationHelpers.ts)
        const getLocalizedName = (item, locale) => {
            const currentLocale = locale || localStorage.getItem('i18nextLng') || 'ru';
            
            console.log('üîç getLocalizedName called with:', {
                item: item,
                locale: locale,
                currentLocale: currentLocale,
                localStorage_i18nextLng: localStorage.getItem('i18nextLng')
            });
            
            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
            if (currentLocale === 'uk') {
                const result = item.name_uk || item.name_ru || item.name || '';
                console.log('üá∫üá¶ Ukrainian priority result:', result);
                return result;
            }
            
            // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
            const result = item.name_ru || item.name_uk || item.name || '';
            console.log('üá∑üá∫ Russian priority result:', result);
            return result;
        };

        function setLanguage(lang) {
            localStorage.setItem('i18nextLng', lang);
            console.log(`üîÑ Language set to: ${lang}`);
            testLocalization();
        }

        function testLocalization() {
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
            document.getElementById('city-data').innerHTML = `
                <div class="info">ID: ${testCity.id}</div>
                <div class="info">name: "${testCity.name}"</div>
                <div class="info">name_ru: "${testCity.name_ru}"</div>
                <div class="info">name_uk: "${testCity.name_uk}"</div>
            `;

            // –¢–µ–∫—É—â–∏–π —è–∑—ã–∫
            const currentLang = localStorage.getItem('i18nextLng') || '–Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω';
            document.getElementById('current-language').innerHTML = `
                <div class="result">localStorage.getItem('i18nextLng'): "${currentLang}"</div>
            `;

            // –¢–µ—Å—Ç –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ
            const ruResult = getLocalizedName(testCity, 'ru');
            const ruExpected = '–ö–∏–µ–≤';
            document.getElementById('ru-result').innerHTML = `
                <div class="result">–†–µ–∑—É–ª—å—Ç–∞—Ç: "${ruResult}"</div>
                <div class="result">–û–∂–∏–¥–∞–µ–º—ã–π: "${ruExpected}"</div>
                <div class="${ruResult === ruExpected ? 'success' : 'error'}">
                    ${ruResult === ruExpected ? '‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û' : '‚ùå –û–®–ò–ë–ö–ê'}
                </div>
            `;

            // –¢–µ—Å—Ç –¥–ª—è —É–∫—Ä–∞–∏–Ω—Å–∫–æ–≥–æ
            const ukResult = getLocalizedName(testCity, 'uk');
            const ukExpected = '–ö–∏—ó–≤';
            document.getElementById('uk-result').innerHTML = `
                <div class="result">–†–µ–∑—É–ª—å—Ç–∞—Ç: "${ukResult}"</div>
                <div class="result">–û–∂–∏–¥–∞–µ–º—ã–π: "${ukExpected}"</div>
                <div class="${ukResult === ukExpected ? 'success' : 'error'}">
                    ${ukResult === ukExpected ? '‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û' : '‚ùå –û–®–ò–ë–ö–ê'}
                </div>
            `;
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            console.log('üöÄ Starting localization test...');
            testLocalization();
        };
    </script>
</body>
</html> 