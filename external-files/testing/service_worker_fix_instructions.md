# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú SERVICE WORKER

## üö® –ü—Ä–æ–±–ª–µ–º–∞
- –û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏: `TypeError: Failed to convert value to 'Response'`
- Service Worker –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—É—Å—Ç–æ–π —ç–∫—Ä–∞–Ω –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ sw.js

### 1. **–£–ø—Ä–æ—â–µ–Ω fetch –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**
- –ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è API –∑–∞–ø—Ä–æ—Å—ã (`/api/`)
- –ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ (`chrome-extension://`)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ GET –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### 2. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ Response
- –£–±—Ä–∞–Ω –ø—Ä–æ–±–ª–µ–º–Ω—ã–π `unhandledrejection` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### 3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ö—ç—à–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —É—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (status 200)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –æ—Ç–≤–µ—Ç–∞ (`basic`)
- Graceful handling –æ—à–∏–±–æ–∫

## üõ†Ô∏è –®–∞–≥–∏ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–û—á–∏—Å—Ç–∫–∞ Service Worker –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Application**
3. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Service Workers**
4. –ù–∞–π–¥–∏—Ç–µ `localhost:3008` –∏ –Ω–∞–∂–º–∏—Ç–µ **Unregister**
5. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Storage** ‚Üí **Clear storage** ‚Üí **Clear site data**

### 2. **–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞**
- **Chrome/Edge**: Ctrl+Shift+R (–∂–µ—Å—Ç–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- **Firefox**: Ctrl+F5
- –ò–ª–∏ –≤ DevTools: –ø—Ä–∞–≤—ã–π –∫–ª–∏–∫ –Ω–∞ –∫–Ω–æ–ø–∫–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚Üí **Empty Cache and Hard Reload**

### 3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
```bash
cd tire-service-master-web
rm -rf node_modules/.cache
TSC_COMPILE_ON_ERROR=true npm start
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3008**
- –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ: `[SW] Service Worker –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ`

### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É**
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:3008/test
- –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –ø—Ä–æ—Å—Ç–∞—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

### 3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ DevTools**
- **Console**: –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ `TypeError: Failed to convert value to 'Response'`
- **Network**: –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- **Application ‚Üí Service Workers**: Service Worker –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–µ–Ω

## üö® –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ Service Worker
–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ `public/index.html`:
```html
<!-- 
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')...
    });
  }
</script>
-->
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -f "npm start"
pkill -f "react-scripts"

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à–∏
rm -rf node_modules/.cache
rm -rf build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
npm start
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò–Ω–∫–æ–≥–Ω–∏—Ç–æ —Ä–µ–∂–∏–º
–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ –±—Ä–∞—É–∑–µ—Ä–∞ - —ç—Ç–æ –∏—Å–∫–ª—é—á–∏—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –∫—ç—à–µ–º.

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ö–æ–Ω—Å–æ–ª—å —á–∏—Å—Ç–∞—è (—Ç–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≥—Ä—É–∑–∫–µ SW)
- ‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/test` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Service Worker —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞–ª–∏—Å—å, —Å–æ–æ–±—â–∏—Ç–µ:
1. –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç http://localhost:3008/test
2. –û—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
3. –°—Ç–∞—Ç—É—Å Service Worker –≤ DevTools
4. –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞ 