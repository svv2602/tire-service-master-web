<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è Google OAuth –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-case {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #2196F3;
        }
        .success { border-left-color: #4CAF50; background: #f1f8e9; }
        .error { border-left-color: #f44336; background: #ffebee; }
        .warning { border-left-color: #ff9800; background: #fff3e0; }
        .code {
            background: #272822;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            overflow-x: auto;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        .button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .button:hover { background: #1976D2; }
    </style>
</head>
<body>
    <h1>üîß –¢–µ—Å—Ç –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è Google OAuth –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h1>
    
    <div class="test-case">
        <h2>üéØ –ü—Ä–æ–±–ª–µ–º–∞</h2>
        <p>–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ <code>/client/booking</code> –≤ —à–∞–≥–µ "–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ Google OAuth, –Ω–µ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –µ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è.</p>
    </div>

    <div class="test-case success">
        <h2>‚úÖ –†–µ—à–µ–Ω–∏–µ</h2>
        <p><strong>–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:</strong></p>
        <ul>
            <li>‚úÖ –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏, —Ñ–∞–º–∏–ª–∏–∏, email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</li>
            <li>‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–∞ "–Ø –ø–æ–ª—É—á–∞—Ç–µ–ª—å —É—Å–ª—É–≥"</li>
            <li>‚úÖ –î–∏–∞–ª–æ–≥ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç –≤ –ø—Ä–æ—Ñ–∏–ª–µ</li>
            <li>‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API</li>
            <li>‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Redux —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º</li>
        </ul>
    </div>

    <div class="test-case">
        <h2>üß™ –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        
        <div class="step">
            <h3>–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º</h3>
            <p><strong>–£—Å–ª–æ–≤–∏–µ:</strong> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ Google OAuth, –≤ –ø—Ä–æ—Ñ–∏–ª–µ –µ—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω</p>
            <p><strong>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong></p>
            <ul>
                <li>–§–æ—Ä–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                <li>–ß–µ–∫–±–æ–∫—Å "–Ø –ø–æ–ª—É—á–∞—Ç–µ–ª—å —É—Å–ª—É–≥" –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–µ–Ω</li>
                <li>–î–∏–∞–ª–æ–≥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ù–ï –ø–æ—è–≤–ª—è–µ—Ç—Å—è</li>
            </ul>
        </div>

        <div class="step">
            <h3>–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</h3>
            <p><strong>–£—Å–ª–æ–≤–∏–µ:</strong> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ Google OAuth, –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ù–ï–¢ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</p>
            <p><strong>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong></p>
            <ul>
                <li>–§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω–æ (–∏–º—è, —Ñ–∞–º–∏–ª–∏—è, email)</li>
                <li>–ü–æ—è–≤–ª—è–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω</li>
                <li>–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å –∏ —Ñ–æ—Ä–º–∞</li>
                <li>–ü—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–≤–µ—Å—Ç–∏ —Ç–µ–ª–µ—Ñ–æ–Ω –≤—Ä—É—á–Ω—É—é</li>
            </ul>
        </div>

        <div class="step">
            <h3>–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
            <p><strong>–£—Å–ª–æ–≤–∏–µ:</strong> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω (–≥–æ—Å—Ç–µ–≤–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)</p>
            <p><strong>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong></p>
            <ul>
                <li>–§–æ—Ä–º–∞ –ø—É—Å—Ç–∞—è</li>
                <li>–ß–µ–∫–±–æ–∫—Å "–Ø –ø–æ–ª—É—á–∞—Ç–µ–ª—å —É—Å–ª—É–≥" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</li>
                <li>–í—Å–µ –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤–≤–æ–¥–∞</li>
            </ul>
        </div>
    </div>

    <div class="test-case warning">
        <h2>‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ</h2>
        <div class="code">
// ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω useEffect –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
useEffect(() => {
  if (isAuthenticated && user) {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    setFormData((prev) => ({
      ...prev,
      service_recipient: {
        first_name: user.first_name || '',
        last_name: user.last_name || '',
        phone: user.phone || '',
        email: user.email || '',
      }
    }));
    
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–µ–∫–±–æ–∫—Å "–Ø –ø–æ–ª—É—á–∞—Ç–µ–ª—å —É—Å–ª—É–≥"
    setIsUserRecipient(true);
    
    // –ï—Å–ª–∏ –Ω–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∏–∞–ª–æ–≥
    if (!user.phone) {
      setShowPhoneUpdateDialog(true);
    }
  }
}, [isAuthenticated, user, setFormData]);

// ‚úÖ –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const handleUpdateUserPhone = async () => {
  const updatedUser = await updateProfile({
    first_name: user.first_name,
    last_name: user.last_name,
    email: user.email,
    phone: newPhone,
  }).unwrap();
  
  // –û–±–Ω–æ–≤–ª—è–µ–º Redux —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  dispatch(setCredentials({
    user: { ...updatedUser, role: updatedUser.role as UserRole },
    accessToken: null
  }));
};
        </div>
    </div>

    <div class="test-case">
        <h2>üîç –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</h2>
        
        <div class="step">
            <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º Google –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:</h3>
            <ol>
                <li>–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Google OAuth (–µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ)</li>
                <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ <code>/client/booking/new-with-availability</code></li>
                <li>–î–æ–π–¥–∏—Ç–µ –¥–æ —à–∞–≥–∞ "–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"</li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π</li>
                <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —á–µ–∫–±–æ–∫—Å "–Ø –ø–æ–ª—É—á–∞—Ç–µ–ª—å —É—Å–ª—É–≥" –≤–∫–ª—é—á–µ–Ω</li>
            </ol>
        </div>

        <div class="step">
            <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞:</h3>
            <ol>
                <li>–í –∞–¥–º–∏–Ω–∫–µ —É–¥–∞–ª–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
                <li>–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Google OAuth</li>
                <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Ñ–æ—Ä–º—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞</li>
                <li>–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø—Ä–æ–ø—É—Å–∫</li>
            </ol>
        </div>

        <div class="step">
            <h3>API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:</h3>
            <div class="code">
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
curl -X PUT http://localhost:8000/api/v1/auth/profile \
  -H "Content-Type: application/json" \
  -H "Cookie: access_token=YOUR_TOKEN" \
  -d '{
    "user": {
      "first_name": "–ò–º—è",
      "last_name": "–§–∞–º–∏–ª–∏—è", 
      "email": "email@example.com",
      "phone": "+380671234567"
    }
  }'
            </div>
        </div>
    </div>

    <div class="test-case success">
        <h2>‚úÖ –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è UX</h2>
        <ul>
            <li>üöÄ <strong>–£–¥–æ–±—Å—Ç–≤–æ:</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</li>
            <li>üì± <strong>–ü–æ–ª–Ω–æ—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:</strong> –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º</li>
            <li>üîÑ <strong>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:</strong> –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤–æ –≤—Å–µ—Ö —á–∞—Å—Ç—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</li>
            <li>üíæ <strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:</strong> –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –±—É–¥—É—â–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π</li>
            <li>üéØ <strong>–ì–∏–±–∫–æ—Å—Ç—å:</strong> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</li>
        </ul>
    </div>

    <div class="test-case">
        <h2>üìã –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div style="background: white; padding: 15px; border-radius: 4px;">
            <input type="checkbox" id="test1"> <label for="test1">–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º</label><br>
            <input type="checkbox" id="test2"> <label for="test2">–î–∏–∞–ª–æ–≥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label><br>
            <input type="checkbox" id="test3"> <label for="test3">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ API</label><br>
            <input type="checkbox" id="test4"> <label for="test4">–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Redux —Å–æ—Å—Ç–æ—è–Ω–∏—è</label><br>
            <input type="checkbox" id="test5"> <label for="test5">–ü—Ä–æ–ø—É—Å–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label><br>
            <input type="checkbox" id="test6"> <label for="test6">–†–∞–±–æ—Ç–∞ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</label><br>
            <input type="checkbox" id="test7"> <label for="test7">–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ –¥–∏–∞–ª–æ–≥–µ</label><br>
            <input type="checkbox" id="test8"> <label for="test8">–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö</label><br>
        </div>
    </div>

    <script>
        console.log('üß™ –¢–µ—Å—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é');
        console.log('üìù –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏–∑ —á–µ–∫-–ª–∏—Å—Ç–∞');
    </script>
</body>
</html> 