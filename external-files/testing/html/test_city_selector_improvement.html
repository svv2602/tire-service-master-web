<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç: –°–µ–ª–µ–∫—Ç–æ—Ä –≥–æ—Ä–æ–¥–æ–≤ —Å —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-step {
            margin-bottom: 15px;
            padding: 10px;
            border-left: 4px solid #2196F3;
            background-color: #f8f9fa;
        }
        .success { border-left-color: #4CAF50; }
        .warning { border-left-color: #FF9800; }
        .error { border-left-color: #F44336; }
        button {
            background-color: #2196F3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #1976D2;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            background-color: #e3f2fd;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üèôÔ∏è –¢–µ—Å—Ç: –°–µ–ª–µ–∫—Ç–æ—Ä –≥–æ—Ä–æ–¥–æ–≤ —Å —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏</h1>
    
    <div class="test-container">
        <h2>–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞</h2>
        <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É –Ω–æ–≤–æ–≥–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ –≥–æ—Ä–æ–¥–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:</p>
        <ul>
            <li>‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ –≥–æ—Ä–æ–¥–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏</li>
            <li>‚úÖ –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –ø–æ–∏—Å–∫–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≥–æ—Ä–æ–¥–∞</li>
            <li>‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ä–æ–¥–∞</li>
            <li>‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è: –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞</li>
            <li>‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–±—Ä–æ—Å –∑–∞–≤–∏—Å–∏–º—ã—Ö –ø–æ–ª–µ–π –ø—Ä–∏ —Å–º–µ–Ω–µ –≥–æ—Ä–æ–¥–∞</li>
        </ul>
    </div>

    <div class="test-container">
        <h2>1. –¢–µ—Å—Ç API: –ì–æ—Ä–æ–¥–∞ —Å —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏</h2>
        <div class="test-step">
            <strong>–®–∞–≥:</strong> –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç /api/v1/cities/with_service_points
        </div>
        <button onclick="testCitiesWithServicePoints()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç API</button>
        <div id="citiesApiResult" class="result" style="display: none;"></div>
    </div>

    <div class="test-container">
        <h2>2. –¢–µ—Å—Ç UI: –°–µ–ª–µ–∫—Ç–æ—Ä –≥–æ—Ä–æ–¥–æ–≤</h2>
        <div class="test-step">
            <strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong> –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
            <ol>
                <li>–û—Ç–∫—Ä–æ–π—Ç–µ <a href="http://localhost:3008/client/booking" target="_blank">—Å—Ç—Ä–∞–Ω–∏—Ü—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</a></li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ–ª–µ–∫—Ç –≥–æ—Ä–æ–¥–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è</li>
                <li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–π—Ç–∏ –≥–æ—Ä–æ–¥ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫</li>
                <li>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞</li>
                <li>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–∞—Ü–∏—é –∫–∞—Ç–µ–≥–æ—Ä–∏–π</li>
                <li>–°–º–µ–Ω–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å –≤ —Å–±—Ä–æ—Å–µ –∑–∞–≤–∏—Å–∏–º—ã—Ö –ø–æ–ª–µ–π</li>
            </ol>
        </div>
        <button onclick="openBookingPage()">–û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</button>
    </div>

    <div class="test-container">
        <h2>3. –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏</h2>
        <div class="test-step">
            <strong>–ü—Ä–æ–≤–µ—Ä–∫–∞:</strong> –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ UX —Å–æ–æ–±—â–µ–Ω–∏–π
        </div>
        <button onclick="testValidation()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é</button>
        <div id="validationResult" class="result" style="display: none;"></div>
    </div>

    <div class="test-container">
        <h2>4. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
        <div id="testResults" class="result">
            <p>–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –≤—ã—à–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</p>
        </div>
    </div>

    <script>
        const API_BASE_URL = 'http://localhost:8000/api/v1';
        
        async function testCitiesWithServicePoints() {
            const resultDiv = document.getElementById('citiesApiResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<p>‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API...</p>';
            
            try {
                const response = await fetch(`${API_BASE_URL}/cities/with_service_points`);
                const data = await response.json();
                
                if (response.ok) {
                    resultDiv.innerHTML = `
                        <h4>‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</h4>
                        <p><strong>–ù–∞–π–¥–µ–Ω–æ –≥–æ—Ä–æ–¥–æ–≤ —Å —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏:</strong> ${data.data.length}</p>
                        <p><strong>–ü–µ—Ä–≤—ã–µ 3 –≥–æ—Ä–æ–¥–∞:</strong></p>
                        <pre>${JSON.stringify(data.data.slice(0, 3), null, 2)}</pre>
                        <p><strong>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:</strong></p>
                        <ul>
                            <li>‚úÖ –ü–æ–ª–µ 'region' –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–≤–º–µ—Å—Ç–æ 'region_name')</li>
                            <li>‚úÖ –ü–æ–ª–µ 'service_points_count' –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç</li>
                            <li>‚úÖ –¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ —Å —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏</li>
                        </ul>
                    `;
                } else {
                    throw new Error(`HTTP ${response.status}: ${data.error || 'Unknown error'}`);
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <h4>‚ùå –û—à–∏–±–∫–∞ API</h4>
                    <p><strong>–û—à–∏–±–∫–∞:</strong> ${error.message}</p>
                    <p><strong>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:</strong></p>
                    <ul>
                        <li>–ó–∞–ø—É—â–µ–Ω –ª–∏ backend —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 8000</li>
                        <li>–ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞</li>
                        <li>CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</li>
                    </ul>
                `;
            }
        }
        
        function openBookingPage() {
            window.open('http://localhost:3008/client/booking', '_blank');
        }
        
        function testValidation() {
            const resultDiv = document.getElementById('validationResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <h4>üìã –ß–µ–∫-–ª–∏—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏</h4>
                <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø—É–Ω–∫—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:</p>
                <ul>
                    <li>
                        <input type="checkbox" id="check1"> 
                        <label for="check1">–°–µ–ª–µ–∫—Ç –≥–æ—Ä–æ–¥–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥–æ—Ä–æ–¥–∞</label>
                    </li>
                    <li>
                        <input type="checkbox" id="check2"> 
                        <label for="check2">–ü–æ–∏—Å–∫ –ø–æ –≥–æ—Ä–æ–¥–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç (–∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç)</label>
                    </li>
                    <li>
                        <input type="checkbox" id="check3"> 
                        <label for="check3">–†–µ–≥–∏–æ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –≥–æ—Ä–æ–¥–∞</label>
                    </li>
                    <li>
                        <input type="checkbox" id="check4"> 
                        <label for="check4">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞—Ç–µ–º–Ω–µ–Ω—ã –±–µ–∑ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞</label>
                    </li>
                    <li>
                        <input type="checkbox" id="check5"> 
                        <label for="check5">–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ "–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è</label>
                    </li>
                    <li>
                        <input type="checkbox" id="check6"> 
                        <label for="check6">–ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º–∏</label>
                    </li>
                    <li>
                        <input type="checkbox" id="check7"> 
                        <label for="check7">–ü—Ä–∏ —Å–º–µ–Ω–µ –≥–æ—Ä–æ–¥–∞ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –∑–∞–≤–∏—Å–∏–º—ã–µ –ø–æ–ª—è</label>
                    </li>
                </ul>
                <button onclick="calculateValidationScore()" style="margin-top: 10px;">–ü–æ–¥—Å—á–∏—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
                <div id="validationScore" style="margin-top: 10px;"></div>
            `;
        }
        
        function calculateValidationScore() {
            const checkboxes = document.querySelectorAll('#validationResult input[type="checkbox"]');
            const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
            const total = checkboxes.length;
            const percentage = Math.round((checked / total) * 100);
            
            const scoreDiv = document.getElementById('validationScore');
            let status = '';
            let color = '';
            
            if (percentage >= 90) {
                status = '–û—Ç–ª–∏—á–Ω–æ! ‚úÖ';
                color = '#4CAF50';
            } else if (percentage >= 70) {
                status = '–•–æ—Ä–æ—à–æ ‚ö†Ô∏è';
                color = '#FF9800';
            } else {
                status = '–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ ‚ùå';
                color = '#F44336';
            }
            
            scoreDiv.innerHTML = `
                <div style="padding: 10px; background-color: ${color}20; border-left: 4px solid ${color}; border-radius: 4px;">
                    <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏: ${percentage}% (${checked}/${total})</strong><br>
                    <span style="color: ${color};">${status}</span>
                </div>
            `;
            
            updateTestResults();
        }
        
        function updateTestResults() {
            const resultsDiv = document.getElementById('testResults');
            const now = new Date().toLocaleString('ru-RU');
            
            resultsDiv.innerHTML = `
                <h4>üìä –°–≤–æ–¥–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h4>
                <p><strong>–í—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:</strong> ${now}</p>
                <p><strong>–°—Ç–∞—Ç—É—Å:</strong> –°–µ–ª–µ–∫—Ç–æ—Ä –≥–æ—Ä–æ–¥–æ–≤ —Å —Å–µ—Ä–≤–∏—Å–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω</p>
                <p><strong>–ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:</strong></p>
                <ul>
                    <li>‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API cities/with_service_points</li>
                    <li>‚úÖ Autocomplete —Å –ø–æ–∏—Å–∫–æ–º –ø–æ –≥–æ—Ä–æ–¥–∞–º</li>
                    <li>‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ä–æ–¥–∞</li>
                    <li>‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</li>
                    <li>‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–±—Ä–æ—Å –∑–∞–≤–∏—Å–∏–º—ã—Ö –ø–æ–ª–µ–π</li>
                </ul>
                <p><strong>–ö–æ–º–º–∏—Ç—ã:</strong></p>
                <ul>
                    <li>Backend: baf2797 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API –≥–æ—Ä–æ–¥–æ–≤</li>
                    <li>Frontend: e043480 - –£–ª—É—á—à–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞</li>
                </ul>
            `;
        }
    </script>
</body>
</html> 