    üöÄ –£–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫:
    - –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã API –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ VAPID –∫–ª—é—á–µ–π –∏–∑ –ë–î
    - –ü–æ–ª—è –≤–≤–æ–¥–∞ VAPID –∫–ª—é—á–µ–π –≤ PushSettingsPage
    - –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
    - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
    - –£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    
    ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å PWA:
    - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (Android/iOS/Desktop)
    - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
    - –°–ø–∏—Å–æ–∫ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è beforeinstallprompt
    
    üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:
    ‚úÖ –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
    ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Push —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π UX –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
    
    –°–≤—è–∑–∞–Ω–Ω—ã–π backend –∫–æ–º–º–∏—Ç: 052e961

diff --git a/external-files/testing/test_push_notifications_complete.html b/external-files/testing/test_push_notifications_complete.html
new file mode 100644
index 0000000..d4bbd7b
--- /dev/null
+++ b/external-files/testing/test_push_notifications_complete.html
@@ -0,0 +1,676 @@
+<!DOCTYPE html>
+<html lang="ru">
+<head>
+    <meta charset="UTF-8">
+    <meta name="viewport" content="width=device-width, initial-scale=1.0">
+    <title>–¢–µ—Å—Ç Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π - –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
+    <style>
+        body {
+            font-family: Arial, sans-serif;
+            max-width: 1200px;
+            margin: 0 auto;
+            padding: 20px;
+            background-color: #f5f5f5;
+        }
+        .test-section {
+            background: white;
+            margin: 20px 0;
+            padding: 20px;
+            border-radius: 8px;
+            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
+        }
+        .test-button {
+            background: #1976d2;
+            color: white;
+            border: none;
+            padding: 10px 20px;
+            border-radius: 4px;
+            cursor: pointer;
+            margin: 5px;
+        }
+        .test-button:hover {
+            background: #1565c0;
+        }
+        .success { color: #2e7d32; }
+        .error { color: #d32f2f; }
+        .warning { color: #f57c00; }
+        .info { color: #1976d2; }
+        .result {
+            margin: 10px 0;
+            padding: 10px;
+            border-radius: 4px;
+            border-left: 4px solid #ccc;
+        }
+        .result.success { border-color: #4caf50; background: #e8f5e9; }
+        .result.error { border-color: #f44336; background: #ffebee; }
+        .result.warning { border-color: #ff9800; background: #fff3e0; }
+        .result.info { border-color: #2196f3; background: #e3f2fd; }
+        
+        .status-grid {
+            display: grid;
+            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
+            gap: 10px;
+            margin: 15px 0;
+        }
+        .status-item {
+            padding: 10px;
+            border: 1px solid #ddd;
+            border-radius: 4px;
+            text-align: center;
+        }
+        .json-display {
+            background: #f8f8f8;
+            border: 1px solid #ddd;
+            padding: 10px;
+            border-radius: 4px;
+            white-space: pre-wrap;
+            font-family: monospace;
+            font-size: 12px;
+            max-height: 300px;
+            overflow-y: auto;
+        }
+    </style>
+</head>
+<body>
+    <h1>üîî –¢–µ—Å—Ç Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π - –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h1>
+    <p>–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ PushSubscriptionManager</p>
+
+    <!-- 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ -->
+    <div class="test-section">
+        <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞</h2>
+        <div class="status-grid">
+            <div class="status-item">
+                <strong>Service Worker:</strong>
+                <div id="sw-support">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</div>
+            </div>
+            <div class="status-item">
+                <strong>Push API:</strong>
+                <div id="push-support">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</div>
+            </div>
+            <div class="status-item">
+                <strong>Notifications:</strong>
+                <div id="notification-support">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</div>
+            </div>
+            <div class="status-item">
+                <strong>HTTPS:</strong>
+                <div id="https-support">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</div>
+            </div>
+        </div>
+        <button class="test-button" onclick="checkBrowserSupport()">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É</button>
+        <div id="support-result"></div>
+    </div>
+
+    <!-- 2. –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π -->
+    <div class="test-section">
+        <h2>2. –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>
+        <div id="permission-status">–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è...</div>
+        <button class="test-button" onclick="requestNotificationPermission()">üì± –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ</button>
+        <div id="permission-result"></div>
+    </div>
+
+    <!-- 3. –¢–µ—Å—Ç backend API -->
+    <div class="test-section">
+        <h2>3. –¢–µ—Å—Ç Backend API</h2>
+        <button class="test-button" onclick="testPushSettings()">‚öôÔ∏è GET Push Settings</button>
+        <button class="test-button" onclick="testNotificationAPI()">üß™ –¢–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (API)</button>
+        <button class="test-button" onclick="testVapidKeys()">üîë –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VAPID –∫–ª—é—á–∏</button>
+        <div id="api-result"></div>
+    </div>
+
+    <!-- 4. Service Worker -->
+    <div class="test-section">
+        <h2>4. Service Worker</h2>
+        <button class="test-button" onclick="registerServiceWorker()">üìÑ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å SW</button>
+        <button class="test-button" onclick="checkServiceWorkerStatus()">üìä –°—Ç–∞—Ç—É—Å SW</button>
+        <button class="test-button" onclick="unregisterServiceWorker()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å SW</button>
+        <div id="sw-result"></div>
+    </div>
+
+    <!-- 5. Push –ø–æ–¥–ø–∏—Å–∫–∞ -->
+    <div class="test-section">
+        <h2>5. Push –ø–æ–¥–ø–∏—Å–∫–∞</h2>
+        <button class="test-button" onclick="subscribeToPush()">‚úÖ –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</button>
+        <button class="test-button" onclick="unsubscribeFromPush()">‚ùå –û—Ç–ø–∏—Å–∞—Ç—å—Å—è</button>
+        <button class="test-button" onclick="checkSubscriptionStatus()">üìã –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏</button>
+        <div id="subscription-result"></div>
+    </div>
+
+    <!-- 6. –¢–µ—Å—Ç–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
+    <div class="test-section">
+        <h2>6. –¢–µ—Å—Ç–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
+        <button class="test-button" onclick="sendLocalNotification()">üîî –õ–æ–∫–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
+        <button class="test-button" onclick="sendPushFromServer()">üåê Push –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞</button>
+        <button class="test-button" onclick="sendTestMessage()">üí¨ –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ SW</button>
+        <div id="notification-result"></div>
+    </div>
+
+    <!-- 7. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ -->
+    <div class="test-section">
+        <h2>7. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h2>
+        <button class="test-button" onclick="runFullDiagnostics()">üîç –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</button>
+        <button class="test-button" onclick="exportConfiguration()">üì§ –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</button>
+        <div id="diagnostics-result"></div>
+    </div>
+
+    <script>
+        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
+        let currentSubscription = null;
+        let serviceWorkerRegistration = null;
+        const API_BASE = 'http://localhost:8000/api/v1';
+        
+        // –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
+        function showResult(elementId, message, type = 'info') {
+            const element = document.getElementById(elementId);
+            element.innerHTML = `<div class="result ${type}">${message}</div>`;
+        }
+        
+        function appendResult(elementId, message, type = 'info') {
+            const element = document.getElementById(elementId);
+            element.innerHTML += `<div class="result ${type}">${message}</div>`;
+        }
+
+        // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞
+        function checkBrowserSupport() {
+            const swSupport = 'serviceWorker' in navigator;
+            const pushSupport = 'PushManager' in window;
+            const notificationSupport = 'Notification' in window;
+            const httpsSupport = location.protocol === 'https:' || location.hostname === 'localhost';
+            
+            document.getElementById('sw-support').innerHTML = swSupport ? 
+                '<span class="success">‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</span>' : 
+                '<span class="error">‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</span>';
+                
+            document.getElementById('push-support').innerHTML = pushSupport ? 
+                '<span class="success">‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</span>' : 
+                '<span class="error">‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</span>';
+                
+            document.getElementById('notification-support').innerHTML = notificationSupport ? 
+                '<span class="success">‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</span>' : 
+                '<span class="error">‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</span>';
+                
+            document.getElementById('https-support').innerHTML = httpsSupport ? 
+                '<span class="success">‚úÖ HTTPS/localhost</span>' : 
+                '<span class="error">‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è HTTPS</span>';
+
+            const allSupported = swSupport && pushSupport && notificationSupport && httpsSupport;
+            showResult('support-result', 
+                allSupported ? 
+                    '‚úÖ –ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è!' : 
+                    '‚ö†Ô∏è –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π',
+                allSupported ? 'success' : 'warning'
+            );
+        }
+
+        // 2. –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
+        function updatePermissionStatus() {
+            const permission = Notification.permission;
+            let status = '';
+            let className = '';
+            
+            switch(permission) {
+                case 'granted':
+                    status = '‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω—ã';
+                    className = 'success';
+                    break;
+                case 'denied':
+                    status = '‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω—ã';
+                    className = 'error';
+                    break;
+                case 'default':
+                    status = '‚è≥ –ù–µ –∑–∞–ø—Ä–æ—à–µ–Ω—ã';
+                    className = 'warning';
+                    break;
+            }
+            
+            document.getElementById('permission-status').innerHTML = 
+                `<span class="${className}">${status}</span>`;
+        }
+
+        async function requestNotificationPermission() {
+            try {
+                const permission = await Notification.requestPermission();
+                updatePermissionStatus();
+                showResult('permission-result', 
+                    `–†–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è: ${permission}`, 
+                    permission === 'granted' ? 'success' : 'warning'
+                );
+            } catch (error) {
+                showResult('permission-result', `–û—à–∏–±–∫–∞: ${error.message}`, 'error');
+            }
+        }
+
+        // 3. –¢–µ—Å—Ç Backend API
+        async function testPushSettings() {
+            try {
+                showResult('api-result', '‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Push...', 'info');
+                
+                const response = await fetch(`${API_BASE}/push_settings`, {
+                    credentials: 'include',
+                    headers: {
+                        'Content-Type': 'application/json',
+                    }
+                });
+                
+                const data = await response.json();
+                
+                if (response.ok) {
+                    showResult('api-result', 
+                        `‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—É—á–µ–Ω—ã:<div class="json-display">${JSON.stringify(data, null, 2)}</div>`, 
+                        'success'
+                    );
+                } else {
+                    showResult('api-result', 
+                        `‚ùå –û—à–∏–±–∫–∞ ${response.status}: ${JSON.stringify(data, null, 2)}`, 
+                        'error'
+                    );
+                }
+            } catch (error) {
+                showResult('api-result', `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error');
+            }
+        }
+
+        async function testNotificationAPI() {
+            try {
+                showResult('api-result', '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è...', 'info');
+                
+                const response = await fetch(`${API_BASE}/push_settings/test_notification`, {
+                    method: 'POST',
+                    credentials: 'include',
+                    headers: {
+                        'Content-Type': 'application/json',
+                    }
+                });
+                
+                const data = await response.json();
+                
+                if (response.ok) {
+                    appendResult('api-result', 
+                        `‚úÖ –¢–µ—Å—Ç —É—Å–ø–µ—à–µ–Ω: ${data.message}
+                        ${data.info ? `<div class="json-display">${JSON.stringify(data.info, null, 2)}</div>` : ''}`, 
+                        'success'
+                    );
+                } else {
+                    appendResult('api-result', 
+                        `‚ùå –û—à–∏–±–∫–∞ ${response.status}: ${data.message || JSON.stringify(data)}`, 
+                        'error'
+                    );
+                }
+            } catch (error) {
+                appendResult('api-result', `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`, 'error');
+            }
+        }
+
+        async function testVapidKeys() {
+            try {
+                const response = await fetch(`${API_BASE}/push_settings`, {
+                    credentials: 'include'
+                });
+                const data = await response.json();
+                
+                if (data.vapid_public_key) {
+                    appendResult('api-result', 
+                        `üîë VAPID Public Key –Ω–∞–π–¥–µ–Ω: ${data.vapid_public_key.substring(0, 20)}...`, 
+                        'success'
+                    );
+                } else {
+                    appendResult('api-result', '‚ö†Ô∏è VAPID –∫–ª—é—á–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã', 'warning');
+                }
+            } catch (error) {
+                appendResult('api-result', `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ VAPID: ${error.message}`, 'error');
+            }
+        }
+
+        // 4. Service Worker
+        async function registerServiceWorker() {
+            try {
+                showResult('sw-result', '‚è≥ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker...', 'info');
+                
+                serviceWorkerRegistration = await navigator.serviceWorker.register('/sw.js');
+                
+                showResult('sw-result', '‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
+                
+                // –ñ–¥–µ–º –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
+                await new Promise((resolve) => {
+                    if (serviceWorkerRegistration.active) {
+                        resolve();
+                    } else {
+                        serviceWorkerRegistration.addEventListener('updatefound', () => {
+                            serviceWorkerRegistration.installing.addEventListener('statechange', (e) => {
+                                if (e.target.state === 'activated') {
+                                    resolve();
+                                }
+                            });
+                        });
+                    }
+                });
+                
+                appendResult('sw-result', '‚úÖ Service Worker –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!', 'success');
+                
+            } catch (error) {
+                showResult('sw-result', `‚ùå –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏: ${error.message}`, 'error');
+            }
+        }
+
+        async function checkServiceWorkerStatus() {
+            try {
+                const registration = await navigator.serviceWorker.ready;
+                const status = {
+                    scope: registration.scope,
+                    active: !!registration.active,
+                    installing: !!registration.installing,
+                    waiting: !!registration.waiting,
+                    pushManager: !!registration.pushManager
+                };
+                
+                showResult('sw-result', 
+                    `üìä –°—Ç–∞—Ç—É—Å Service Worker:<div class="json-display">${JSON.stringify(status, null, 2)}</div>`, 
+                    'info'
+                );
+            } catch (error) {
+                showResult('sw-result', `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: ${error.message}`, 'error');
+            }
+        }
+
+        async function unregisterServiceWorker() {
+            try {
+                const registrations = await navigator.serviceWorker.getRegistrations();
+                for (let registration of registrations) {
+                    await registration.unregister();
+                }
+                showResult('sw-result', 'üóëÔ∏è –í—Å–µ Service Worker —É–¥–∞–ª–µ–Ω—ã', 'info');
+            } catch (error) {
+                showResult('sw-result', `‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: ${error.message}`, 'error');
+            }
+        }
+
+        // 5. Push –ø–æ–¥–ø–∏—Å–∫–∞
+        async function subscribeToPush() {
+            try {
+                showResult('subscription-result', '‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ Push –ø–æ–¥–ø–∏—Å–∫–∏...', 'info');
+                
+                if (!serviceWorkerRegistration) {
+                    await registerServiceWorker();
+                }
+                
+                // –ü–æ–ª—É—á–∞–µ–º VAPID –∫–ª—é—á
+                const settingsResponse = await fetch(`${API_BASE}/push_settings`, {
+                    credentials: 'include'
+                });
+                const settings = await settingsResponse.json();
+                
+                if (!settings.vapid_public_key) {
+                    throw new Error('VAPID –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö');
+                }
+                
+                // –°–æ–∑–¥–∞–µ–º –ø–æ–¥–ø–∏—Å–∫—É
+                currentSubscription = await serviceWorkerRegistration.pushManager.subscribe({
+                    userVisibleOnly: true,
+                    applicationServerKey: urlBase64ToUint8Array(settings.vapid_public_key)
+                });
+                
+                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
+                const response = await fetch(`${API_BASE}/push_subscriptions`, {
+                    method: 'POST',
+                    credentials: 'include',
+                    headers: {
+                        'Content-Type': 'application/json',
+                    },
+                    body: JSON.stringify({
+                        push_subscription: {
+                            endpoint: currentSubscription.endpoint,
+                            p256dh_key: arrayBufferToBase64(currentSubscription.getKey('p256dh')),
+                            auth_key: arrayBufferToBase64(currentSubscription.getKey('auth')),
+                            user_agent: navigator.userAgent
+                        }
+                    })
+                });
+                
+                const result = await response.json();
+                
+                if (response.ok) {
+                    showResult('subscription-result', 
+                        `‚úÖ Push –ø–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!<div class="json-display">Endpoint: ${currentSubscription.endpoint}</div>`, 
+                        'success'
+                    );
+                } else {
+                    throw new Error(`–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: ${result.message || response.status}`);
+                }
+                
+            } catch (error) {
+                showResult('subscription-result', `‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏: ${error.message}`, 'error');
+            }
+        }
+
+        async function checkSubscriptionStatus() {
+            try {
+                const registration = await navigator.serviceWorker.ready;
+                const subscription = await registration.pushManager.getSubscription();
+                
+                if (subscription) {
+                    currentSubscription = subscription;
+                    showResult('subscription-result', 
+                        `‚úÖ –ê–∫—Ç–∏–≤–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞–π–¥–µ–Ω–∞:<div class="json-display">Endpoint: ${subscription.endpoint}</div>`, 
+                        'success'
+                    );
+                } else {
+                    showResult('subscription-result', '‚ùå –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ', 'warning');
+                }
+            } catch (error) {
+                showResult('subscription-result', `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏: ${error.message}`, 'error');
+            }
+        }
+
+        async function unsubscribeFromPush() {
+            try {
+                if (currentSubscription) {
+                    await currentSubscription.unsubscribe();
+                    currentSubscription = null;
+                    showResult('subscription-result', '‚úÖ –û—Ç–ø–∏—Å–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!', 'success');
+                } else {
+                    showResult('subscription-result', '‚ö†Ô∏è –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ', 'warning');
+                }
+            } catch (error) {
+                showResult('subscription-result', `‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø–∏—Å–∫–∏: ${error.message}`, 'error');
+            }
+        }
+
+        // 6. –¢–µ—Å—Ç–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
+        function sendLocalNotification() {
+            if (Notification.permission === 'granted') {
+                const notification = new Notification('–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ', {
+                    body: '–≠—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–µ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ',
+                    icon: '/favicon.ico',
+                    tag: 'test-local'
+                });
+                
+                notification.onclick = () => {
+                    window.focus();
+                    notification.close();
+                };
+                
+                showResult('notification-result', '‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!', 'success');
+            } else {
+                showResult('notification-result', '‚ùå –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã', 'error');
+            }
+        }
+
+        async function sendPushFromServer() {
+            try {
+                if (!currentSubscription) {
+                    throw new Error('–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ Push –ø–æ–¥–ø–∏—Å–∫—É');
+                }
+                
+                showResult('notification-result', '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞...', 'info');
+                
+                const response = await fetch(`${API_BASE}/push_settings/test_notification`, {
+                    method: 'POST',
+                    credentials: 'include',
+                    headers: {
+                        'Content-Type': 'application/json',
+                    }
+                });
+                
+                const result = await response.json();
+                
+                if (response.ok) {
+                    appendResult('notification-result', `‚úÖ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${result.message}`, 'success');
+                } else {
+                    appendResult('notification-result', `‚ùå –û—à–∏–±–∫–∞: ${result.message}`, 'error');
+                }
+                
+            } catch (error) {
+                appendResult('notification-result', `‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
+            }
+        }
+
+        async function sendTestMessage() {
+            try {
+                const registration = await navigator.serviceWorker.ready;
+                
+                if (registration.active) {
+                    registration.active.postMessage({
+                        type: 'TEST_MESSAGE',
+                        payload: '–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –≥–ª–∞–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞'
+                    });
+                    
+                    showResult('notification-result', '‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Service Worker', 'success');
+                } else {
+                    throw new Error('Service Worker –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω');
+                }
+            } catch (error) {
+                showResult('notification-result', `‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: ${error.message}`, 'error');
+            }
+        }
+
+        // 7. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
+        async function runFullDiagnostics() {
+            showResult('diagnostics-result', 'üîç –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏...', 'info');
+            
+            const diagnostics = {
+                timestamp: new Date().toISOString(),
+                browser: {
+                    userAgent: navigator.userAgent,
+                    serviceWorkerSupport: 'serviceWorker' in navigator,
+                    pushManagerSupport: 'PushManager' in window,
+                    notificationSupport: 'Notification' in window,
+                    notificationPermission: Notification.permission
+                },
+                environment: {
+                    protocol: location.protocol,
+                    hostname: location.hostname,
+                    port: location.port,
+                    isSecure: location.protocol === 'https:' || location.hostname === 'localhost'
+                },
+                serviceWorker: null,
+                pushSubscription: null,
+                apiConnection: null
+            };
+            
+            // –ü—Ä–æ–≤–µ—Ä–∫–∞ Service Worker
+            try {
+                const registration = await navigator.serviceWorker.ready;
+                diagnostics.serviceWorker = {
+                    scope: registration.scope,
+                    active: !!registration.active,
+                    pushManagerAvailable: !!registration.pushManager
+                };
+                
+                const subscription = await registration.pushManager.getSubscription();
+                if (subscription) {
+                    diagnostics.pushSubscription = {
+                        endpoint: subscription.endpoint,
+                        hasKeys: !!(subscription.getKey('p256dh') && subscription.getKey('auth'))
+                    };
+                }
+            } catch (error) {
+                diagnostics.serviceWorker = { error: error.message };
+            }
+            
+            // –ü—Ä–æ–≤–µ—Ä–∫–∞ API
+            try {
+                const response = await fetch(`${API_BASE}/push_settings`, {
+                    credentials: 'include'
+                });
+                diagnostics.apiConnection = {
+                    status: response.status,
+                    ok: response.ok,
+                    hasVapidKey: false
+                };
+                
+                if (response.ok) {
+                    const data = await response.json();
+                    diagnostics.apiConnection.hasVapidKey = !!data.vapid_public_key;
+                }
+            } catch (error) {
+                diagnostics.apiConnection = { error: error.message };
+            }
+            
+            showResult('diagnostics-result', 
+                `üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞:<div class="json-display">${JSON.stringify(diagnostics, null, 2)}</div>`, 
+                'info'
+            );
+        }
+
+        function exportConfiguration() {
+            const config = {
+                timestamp: new Date().toISOString(),
+                apiBase: API_BASE,
+                currentUrl: location.href,
+                notificationPermission: Notification.permission,
+                hasSubscription: !!currentSubscription,
+                subscriptionEndpoint: currentSubscription ? currentSubscription.endpoint : null
+            };
+            
+            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
+            const url = URL.createObjectURL(blob);
+            const a = document.createElement('a');
+            a.href = url;
+            a.download = `push-config-${new Date().toISOString().slice(0, 19)}.json`;
+            a.click();
+            URL.revokeObjectURL(url);
+            
+            showResult('diagnostics-result', 'üì§ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Ñ–∞–π–ª', 'success');
+        }
+
+        // –£—Ç–∏–ª–∏—Ç—ã
+        function urlBase64ToUint8Array(base64String) {
+            const padding = '='.repeat((4 - base64String.length % 4) % 4);
+            const base64 = (base64String + padding)
+                .replace(/\-/g, '+')
+                .replace(/_/g, '/');
+
+            const rawData = window.atob(base64);
+            const outputArray = new Uint8Array(rawData.length);
+
+            for (let i = 0; i < rawData.length; ++i) {
+                outputArray[i] = rawData.charCodeAt(i);
+            }
+            return outputArray;
+        }
+
+        function arrayBufferToBase64(buffer) {
+            const bytes = new Uint8Array(buffer);
+            let binary = '';
+            for (let i = 0; i < bytes.byteLength; i++) {
+                binary += String.fromCharCode(bytes[i]);
+            }
+            return window.btoa(binary);
+        }
+
+        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
+        window.addEventListener('load', () => {
+            checkBrowserSupport();
+            updatePermissionStatus();
+        });
+
+        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç Service Worker
+        navigator.serviceWorker.addEventListener('message', (event) => {
+            console.log('–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç Service Worker:', event.data);
+            appendResult('notification-result', 
+                `üì® –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç SW: ${JSON.stringify(event.data)}`, 
+                'info'
+            );
+        });
+    </script>
+</body>
+</html> 
\ No newline at end of file
