const fs = require('fs');
const path = require('path');

// Словарь переводов русский -> украинский
const translations = {
  // Основные слова
  "Новое бронирование": "Нове бронювання",
  "гость": "гість",
  "Отменить": "Скасувати",
  "Назад": "Назад",
  "Далее": "Далі",
  "Создание...": "Створення...",
  "Создать бронирование": "Створити бронювання",
  
  // Шаги бронирования
  "Выбор типа услуг": "Вибір типу послуг",
  "Выбор точки обслуживания": "Вибір точки обслуговування",
  "Дата и время": "Дата і час",
  "Контактная информация": "Контактна інформація",
  "Информация об автомобиле": "Інформація про автомобіль",
  "Услуги": "Послуги",
  "Подтверждение": "Підтвердження",
  
  // Сообщения об успехе
  "Бронирование создано!": "Бронювання створено!",
  "Ваше бронирование успешно создано. Вы можете просмотреть его в своем профиле.": "Ваше бронювання успішно створено. Ви можете переглянути його у своєму профілі.",
  "Ваше бронирование успешно создано. Мы свяжемся с вами для подтверждения.": "Ваше бронювання успішно створено. Ми зв'яжемося з вами для підтвердження.",
  "Мои записи": "Мої записи",
  "На главную": "На головну",
  "Вернуться на главную": "Повернутися на головну",
  
  // Валидация
  "Выберите категорию услуг": "Виберіть категорію послуг",
  "Выберите город": "Виберіть місто",
  "Выберите точку обслуживания": "Виберіть точку обслуговування",
  "Выберите дату": "Виберіть дату",
  "Выберите время": "Виберіть час",
  "Заполните контактную информацию": "Заповніть контактну інформацію",
  "Заполните информацию об автомобиле": "Заповніть інформацію про автомобіль",
  "Выберите услуги": "Виберіть послуги",
  
  // Ошибки
  "Ошибка при создании бронирования": "Помилка при створенні бронювання",
  "Ошибка сети. Проверьте подключение к интернету.": "Помилка мережі. Перевірте підключення до інтернету.",
  "Ошибка сервера. Попробуйте позже.": "Помилка сервера. Спробуйте пізніше.",
  "Проверьте правильность заполнения всех полей": "Перевірте правильність заповнення всіх полів",
  
  // Выбор категории
  "Выбор категории услуг": "Вибір категорії послуг",
  "Ошибка загрузки категорий": "Помилка завантаження категорій",
  "Начните вводить название города": "Почніть вводити назву міста",
  "Города не найдены": "Міста не знайдено",
  "Загрузка городов...": "Завантаження міст...",
  "Доступные категории услуг в городе": "Доступні категорії послуг у місті",
  "Сначала выберите город, чтобы увидеть доступные категории услуг": "Спочатку виберіть місто, щоб побачити доступні категорії послуг",
  "В выбранном городе пока нет доступных категорий услуг. Попробуйте выбрать другой город.": "У вибраному місті поки немає доступних категорій послуг. Спробуйте вибрати інше місто.",
  "точек": "точок",
  "услуг": "послуг",
  "Все обязательные поля заполнены. Можете перейти к следующему шагу.": "Всі обов'язкові поля заповнено. Можете перейти до наступного кроку.",
  
  // Выбор сервисной точки
  "Выбор сервисной точки": "Вибір сервісної точки",
  "Город": "Місто",
  "Ошибка загрузки городов": "Помилка завантаження міст",
  "В выбранном городе нет доступных сервисных точек для данной категории": "У вибраному місті немає доступних сервісних точок для даної категорії",
  "Ошибка загрузки сервисных точек": "Помилка завантаження сервісних точок",
  "Выберите сервисную точку": "Виберіть сервісну точку",
  "Доступные сервисные точки в городе {{cityName}}": "Доступні сервісні точки у місті {{cityName}}",
  "В выбранном городе нет доступных сервисных точек": "У вибраному місті немає доступних сервісних точок",
  "Загрузка сервисных точек...": "Завантаження сервісних точок...",
  "Ошибка загрузки сервисных точек": "Помилка завантаження сервісних точок",
  "Детали сервисной точки": "Деталі сервісної точки",
  "Адрес": "Адреса",
  "Телефон": "Телефон",
  "Рабочие часы": "Робочі години",
  "Рейтинг": "Рейтинг",
  "отзывов": "відгуків",
  "Выбрать точку": "Вибрати точку",
  "Изменить точку": "Змінити точку",
  "Заполните все обязательные поля": "Заповніть всі обов'язкові поля",
  "Город обязателен для заполнения": "Місто обов'язкове для заповнення",
  "Сервисная точка обязательна для заполнения": "Сервісна точка обов'язкова для заповнення",
  "Подробнее": "Детальніше",
  "Скрыть": "Сховати",
  "фото": "фото",
  "Открыто": "Відкрито",
  "Закрыто": "Зачинено",
  "Откроется в": "Відкриється о",
  "Закроется в": "Закриється о",
  "Выбранная категория:": "Вибрана категорія:",
  "Заполните все обязательные поля:": "Заповніть усі обов'язкові поля:",
  "Сервисная точка": "Сервісна точка",
  "Данные предзаполнены на основе выбранной категории услуг": "Дані попередньо заповнені на основі вибраної категорії послуг",
  "Все поля заполнены корректно": "Всі поля заповнені коректно",
  
  // Контактная информация
  "Имя": "Ім'я",
  "Фамилия": "Прізвище",
  "Email": "Email",
  "Конфиденциальность": "Конфіденційність",
  "Мы используем ваши данные только для обработки бронирования и не передаем их третьим лицам.": "Ми використовуємо ваші дані лише для обробки бронювання і не передаємо їх третім особам.",
  "Введите ваше имя": "Введіть ваше ім'я",
  "Введите вашу фамилию": "Введіть ваше прізвище",
  "Введите ваш email (необязательно)": "Введіть ваш email (необов'язково)",
  "Формат: +38 (0ХХ) ХХХ-ХХ-ХХ": "Формат: +38 (0ХХ) ХХХ-ХХ-ХХ",
  "Email необязателен, но поможет получать уведомления": "Email необов'язковий, але допоможе отримувати сповіщення",
  "Имя обязательно для заполнения": "Ім'я обов'язкове для заповнення",
  "Фамилия обязательна для заполнения": "Прізвище обов'язкове для заповнення",
  "Телефон обязателен для заполнения": "Телефон обов'язковий для заповнення",
  "Имя должно быть не менее 2 символов": "Ім'я повинно бути не менше 2 символів",
  "Фамилия должна быть не менее 2 символов": "Прізвище повинно бути не менше 2 символів",
  "Телефон должен начинаться с +380": "Телефон повинен починатися з +380",
  "Телефон должен содержать 12 цифр после +": "Телефон повинен містити 12 цифр після +",
  "Введите корректный email адрес": "Введіть коректний email адрес",
  "Вы авторизованы как": "Ви авторизовані як",
  "Данные предзаполнены из вашего профиля.": "Дані попередньо заповнені з вашого профілю.",
  "Вы создаете гостевое бронирование.": "Ви створюєте гостьове бронювання.",
  "Информация о бронировании будет отправлена на указанный номер телефона.": "Інформація про бронювання буде відправлена на вказаний номер телефону.",
  
  // Информация об автомобиле
  "Номер автомобиля": "Номер автомобіля",
  "Номер автомобиля обязателен для заполнения": "Номер автомобіля обов'язковий для заповнення",
  "Тип автомобиля": "Тип автомобіля",
  "Марка автомобиля": "Марка автомобіля",
  "Модель автомобиля": "Модель автомобіля",
  "Выберите тип автомобиля": "Виберіть тип автомобіля",
  "Выберите марку": "Виберіть марку",
  "Выберите модель": "Виберіть модель",
  "Мои автомобили": "Мої автомобілі",
  "Выберите один из ваших сохраненных автомобилей": "Виберіть один з ваших збережених автомобілів",
  "У вас пока нет сохраненных автомобилей": "У вас поки немає збережених автомобілів",
  "Добавить автомобиль в профиль": "Додати автомобіль до профілю",
  "Типы автомобилей": "Типи автомобілів",
  "Выберите подходящий тип вашего автомобиля": "Виберіть підходящий тип вашого автомобіля",
  "Марки автомобилей": "Марки автомобілів",
  "Выберите марку вашего автомобиля": "Виберіть марку вашого автомобіля",
  "Модели автомобилей": "Моделі автомобілів",
  "Выберите модель вашего автомобиля": "Виберіть модель вашого автомобіля",
  "Введите государственный номер вашего автомобиля": "Введіть державний номер вашого автомобіля",
  "Загрузка типов автомобилей...": "Завантаження типів автомобілів...",
  "Загрузка марок...": "Завантаження марок...",
  "Загрузка моделей...": "Завантаження моделей...",
  "Загрузка ваших автомобилей...": "Завантаження ваших автомобілів...",
  "Ошибка загрузки типов автомобилей": "Помилка завантаження типів автомобілів",
  "Ошибка загрузки марок": "Помилка завантаження марок",
  "Ошибка загрузки моделей": "Помилка завантаження моделей",
  "Ошибка загрузки ваших автомобилей": "Помилка завантаження ваших автомобілів",
  "Выбранный автомобиль": "Вибраний автомобіль",
  "Изменить автомобиль": "Змінити автомобіль",
  "Информация об автомобиле": "Інформація про автомобіль",
  "Год": "Рік випуску",
  "необязательно": "необов'язково",
  "Выберите один из своих автомобилей или укажите данные вручную. Указание марки и модели поможет мастеру лучше подготовиться к обслуживанию": "Виберіть один з ваших автомобілів або вкажіть дані вручну. Зазначення марки і моделі допоможе майстру краще підготуватися до обслуговування",
  "Указание марки и модели автомобиля поможет мастеру лучше подготовиться к обслуживанию": "Зазначення марки і моделі автомобіля допоможе майстру краще підготуватися до обслуговування",
  "Неизвестная марка": "Невідома марка",
  "Неизвестная модель": "Невідома модель",
  
  // Выбор услуг
  "Выбор услуг": "Вибір послуг",
  "Доступные услуги": "Доступні послуги",
  "Выбранные услуги": "Вибрані послуги",
  "Нет доступных услуг": "Немає доступних послуг",
  "Загрузка услуг...": "Завантаження послуг...",
  "Ошибка загрузки услуг": "Помилка завантаження послуг",
  "Цена": "Ціна",
  "Длительность": "Тривалість",
  "Выбрать услугу": "Вибрати послугу",
  "Удалить услугу": "Видалити послугу",
  "Общая стоимость": "Загальна вартість",
  "Общая продолжительность": "Загальна тривалість",
  "Выберите хотя бы одну услугу": "Виберіть хоча б одну послугу",
  "Описание услуги": "Опис послуги",
  "Детали услуги": "Деталі послуги",
  "от": "від",
  "грн": "грн",
  "мин": "хв",
  "Выбор услуг и комментарии": "Вибір послуг та коментарі",
  "Выбор услуг не обязателен. Вы можете обсудить необходимые услуги с мастером на месте.": "Вибір послуг не обов'язковий. Ви можете обговорити необхідні послуги з майстром на місці.",
  "для выбранной категории": "для вибраної категорії",
  "Нет доступных услуг для выбранной категории": "Немає доступних послуг для вибраної категорії",
  "Услуга #{{id}}": "Послуга #{{id}}",
  "Итого": "Разом",
  "Очистить все": "Очистити все",
  "Комментарий к записи": "Коментар до запису",
  "Добавьте комментарий к записи (необязательно)": "Додайте коментар до запису (необов'язково)",
  "Все поля заполнены. Можете перейти к следующему шагу.": "Всі поля заповнені. Можете перейти до наступного кроку.",
  "по запросу": "за запитом",
  "Сначала необходимо выбрать сервисную точку на предыдущем шаге": "Спочатку необхідно вибрати сервісну точку на попередньому кроці",
  "Услуги не выбраны. Вы можете обсудить необходимые услуги с мастером на месте.": "Послуги не вибрані. Ви можете обговорити необхідні послуги з майстром на місці.",
  
  // Подтверждение
  "Подтверждение записи": "Підтвердження запису",
  "Проверьте все данные перед подтверждением записи. Вы сможете изменить информацию, вернувшись к предыдущим шагам.": "Перевірте всі дані перед підтвердженням запису. Ви зможете змінити інформацію, повернувшись до попередніх кроків.",
  "Детали записи": "Деталі запису",
  "Точка обслуживания": "Точка обслуговування",
  "Автомобиль": "Автомобіль",
  "Общая стоимость": "Загальна вартість",
  "Подтвердить бронирование": "Підтвердити бронювання",
  "Подтвердить": "Підтвердити",
  "Редактировать": "Редагувати",
  "Загрузка информации о сервисной точке...": "Завантаження інформації про сервісну точку...",
  "Загрузка города...": "Завантаження міста...",
  "Загрузка информации о типе автомобиля...": "Завантаження інформації про тип автомобіля...",
  "Загрузка услуги...": "Завантаження послуги...",
  "Ошибка загрузки данных": "Помилка завантаження даних",
  "ошибка загрузки города": "помилка завантаження міста",
  "Примечания": "Примітки",
  "Комментарий": "Коментар",
  "Добавьте примечания к бронированию (необязательно)": "Додайте примітки до бронювання (необов'язково)",
  "Сводка бронирования": "Зведення бронювання",
  "Информация об оплате": "Інформація про оплату",
  "Оплата производится в сервисной точке после оказания услуг": "Оплата здійснюється в сервісній точці після надання послуг",
  "Условия бронирования": "Умови бронювання",
  "Подверждая бронирование, вы соглашаетесь с условиями предоставления услуг": "Підтверджуючи бронювання, ви погоджуєтесь з умовами надання послуг",
  "Номер": "Номер",
  "Марка и модель": "Марка і модель",
  "не выбраны. Вы сможете обсудить их с мастером на месте.": "не вибрані. Ви зможете обговорити їх з майстром на місці.",
  "Настройки уведомлений": "Налаштування сповіщень",
  "Получать SMS и email уведомления о статусе записи": "Отримувати SMS та email сповіщення про статус запису",
  "Нажимая \"Подтвердить\", вы соглашаетесь с условиями предоставления услуг": "Натискаючи \"Підтвердити\", ви погоджуєтесь з умовами надання послуг",
  "не указана": "не вказана",
  "Вернитесь к шагу \"Контактная информация\" для заполнения данных": "Поверніться до кроку \"Контактна інформація\" для заповнення даних",
  "в": "о",
  
  // Общие
  "Загрузка...": "Завантаження...",
  "Произошла ошибка": "Сталася помилка",
  "Повторить": "Повторити",
  "Обязательное поле": "Обов'язкове поле",
  "Необязательное поле": "Необов'язкове поле",
  "Выберите...": "Виберіть...",
  "Поиск...": "Пошук...",
  "Результатов не найдено": "Результатів не знайдено"
};

// Функция для перевода текста
function translateText(text) {
  return translations[text] || text;
}

// Функция для рекурсивного перевода объекта
function translateObject(obj) {
  if (typeof obj === 'string') {
    return translateText(obj);
  } else if (Array.isArray(obj)) {
    return obj.map(translateObject);
  } else if (obj !== null && typeof obj === 'object') {
    const translated = {};
    for (const [key, value] of Object.entries(obj)) {
      translated[key] = translateObject(value);
    }
    return translated;
  }
  return obj;
}

// Основная функция
function translateBookingTranslations() {
  console.log('🔄 Начинаем перевод переводов бронирования с русского на украинский...');

  // Пути к файлам
  const ruFilePath = path.join(__dirname, '../../src/i18n/locales/ru.json');
  const ukFilePath = path.join(__dirname, '../../src/i18n/locales/uk.json');

  try {
    // Читаем русский файл
    console.log('📖 Читаем русский файл ru.json...');
    const ruData = JSON.parse(fs.readFileSync(ruFilePath, 'utf8'));
    
    // Читаем текущий украинский файл
    console.log('📖 Читаем текущий украинский файл uk.json...');
    const ukData = JSON.parse(fs.readFileSync(ukFilePath, 'utf8'));

    // Извлекаем переводы бронирования из русского файла
    const bookingTranslations = {
      booking: ruData.booking,
      bookingSteps: ruData.bookingSteps,
    };

    console.log('📋 Найденные переводы для перевода:');
    console.log('- booking:', Object.keys(bookingTranslations.booking || {}).length, 'ключей');
    console.log('- bookingSteps:', Object.keys(bookingTranslations.bookingSteps || {}).length, 'ключей');

    // Переводим на украинский
    console.log('🔄 Переводим на украинский язык...');
    const translatedBooking = translateObject(bookingTranslations);

    // Объединяем с текущими украинскими данными
    const updatedUkData = {
      ...ukData,
      ...translatedBooking
    };

    // Создаем резервную копию текущего украинского файла
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const backupUkPath = path.join(__dirname, `../../src/i18n/locales/uk.json.backup.${timestamp}`);
    
    console.log('💾 Создаем резервную копию текущего украинского файла...');
    fs.writeFileSync(backupUkPath, JSON.stringify(ukData, null, 2), 'utf8');

    // Записываем обновленные данные
    console.log('✍️ Записываем переведенные данные...');
    fs.writeFileSync(ukFilePath, JSON.stringify(updatedUkData, null, 2), 'utf8');

    console.log('✅ Украинские переводы для страницы /client/booking успешно созданы!');
    console.log('📁 Резервная копия сохранена в:', backupUkPath);
    
    // Выводим статистику
    const stats = {
      'booking.title': updatedUkData.booking?.title || 'НЕ НАЙДЕНО',
      'booking.steps.categorySelection': updatedUkData.booking?.steps?.categorySelection || 'НЕ НАЙДЕНО',
      'bookingSteps.clientInfo.title': updatedUkData.bookingSteps?.clientInfo?.title || 'НЕ НАЙДЕНО',
      'bookingSteps.dateTime.title': updatedUkData.bookingSteps?.dateTime?.title || 'НЕ НАЙДЕНО',
      'bookingSteps.review.title': updatedUkData.bookingSteps?.review?.title || 'НЕ НАЙДЕНО'
    };

    console.log('\n📊 Проверка ключевых переводов:');
    Object.entries(stats).forEach(([key, value]) => {
      console.log(`  ${key}: "${value}"`);
    });

    console.log('\n🎯 Переведено ключей:', Object.keys(translations).length);

  } catch (error) {
    console.error('❌ Ошибка при переводе:', error.message);
    process.exit(1);
  }
}

// Запускаем перевод
translateBookingTranslations(); 