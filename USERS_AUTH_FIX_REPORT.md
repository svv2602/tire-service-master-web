# üîê –û–¢–ß–ï–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã /users

**–î–∞—Ç–∞:** 15 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û  

## üö® –ü—Ä–æ–±–ª–µ–º–∞

```
GET http://localhost:8000/api/v1/users?page=1&per_page=25&active=true 401 (Unauthorized)
```

**–°–∏–º–ø—Ç–æ–º—ã:**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/users` –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–ª—É—á–∞–µ–º –æ—à–∏–±–∫—É 401 (Unauthorized) –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ API
- –í –∫–æ–Ω—Å–æ–ª–∏ –≤–∏–¥–Ω–æ, —á—Ç–æ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å –≤ localStorage, –Ω–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

**–ü—Ä–∏—á–∏–Ω–∞:** –í `baseApi.ts` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –∏–∑ localStorage –∏ Redux state.

## üîß –†–µ—à–µ–Ω–∏–µ

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω baseApi.ts

**–ë—ã–ª–æ:**
```typescript
// –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Ç–æ–∫–µ–Ω–∞
const token = (getState() as any).auth?.token;  // ‚ùå –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å accessToken
const fallbackToken = token || localStorage.getItem('authToken');  // ‚ùå –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á
```

**–°—Ç–∞–ª–æ:**
```typescript
// –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Ç–æ–∫–µ–Ω–∞
const token = (getState() as any).auth?.accessToken;  // ‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–µ
const fallbackToken = token || localStorage.getItem(config.AUTH_TOKEN_STORAGE_KEY);  // ‚úÖ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
```

### 2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

```typescript
// –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
console.log('BaseAPI prepareHeaders:', {
  reduxToken: token ? `${token.substring(0, 20)}...` : '–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç',
  localStorageToken: localStorage.getItem(config.AUTH_TOKEN_STORAGE_KEY) ? 
    `${localStorage.getItem(config.AUTH_TOKEN_STORAGE_KEY)!.substring(0, 20)}...` : '–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç',
  finalToken: fallbackToken ? `${fallbackToken.substring(0, 20)}...` : '–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'
});
```

### 3. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω config

```typescript
import config from '../config';
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **–¢–æ–∫–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è** –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö Authorization
- ‚úÖ **–°—Ç—Ä–∞–Ω–∏—Ü–∞ /users –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è** –±–µ–∑ –æ—à–∏–±–æ–∫ 401
- ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ **–ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è** –±–µ–∑ –æ—à–∏–±–æ–∫

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **tire-service-master-web/src/api/baseApi.ts** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–ª—é—á–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ –∫–ª—é—á–µ–π:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ö–ª—é—á –¥–ª—è localStorage | –ö–ª—é—á –¥–ª—è Redux |
|-----------|----------------------|----------------|
| **config.ts** | `'tvoya_shina_token'` | - |
| **authSlice.ts** | `'tvoya_shina_token'` | `accessToken` |
| **baseApi.ts (–±—ã–ª–æ)** | `'authToken'` ‚ùå | `token` ‚ùå |
| **baseApi.ts (—Å—Ç–∞–ª–æ)** | `'tvoya_shina_token'` ‚úÖ | `accessToken` ‚úÖ |

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ–ª—è `accessToken` –∏–∑ Redux state
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞ `config.AUTH_TOKEN_STORAGE_KEY` –¥–ª—è localStorage
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è: `npm run build` - —É—Å–ø–µ—à–Ω–æ
- ‚úÖ Dev —Å–µ—Ä–≤–µ—Ä: `npm start` - –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: —Ç–æ–∫–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ API –∑–∞–ø—Ä–æ—Å–∞—Ö
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ /users: –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª—é—á–∏ –∏–∑ `config.ts`
2. **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ:** –°–ª–µ–¥–∏—Ç—å –∑–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ–º –∫–ª—é—á–µ–π –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
3. **–û—Ç–ª–∞–¥–∫–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å console.log –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å —Ç–æ–∫–µ–Ω–∞–º–∏
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ API —Å–ª–æ–µ

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Ç—Ä–µ–±—É—é—â–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–æ–∫–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ/–ª–æ–≥–∞—É—Ç–µ
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –∏—Å—Ç–µ–∫—à–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ 