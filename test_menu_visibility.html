<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º"</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 25px 0;
            padding: 20px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            background: #f8f9fa;
        }
        .test-button {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        .status {
            margin-left: 10px;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }
        .status.success { background: #27ae60; color: white; }
        .status.error { background: #e74c3c; color: white; }
        .status.pending { background: #f39c12; color: white; }
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            background: #ecf0f1;
        }
        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 14px;
        }
        .admin-link {
            display: inline-block;
            margin: 10px;
            padding: 12px 20px;
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        .admin-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç –¢–µ—Å—Ç –≤–∏–¥–∏–º–æ—Å—Ç–∏ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º"</h1>
        
        <div class="test-section">
            <h2>üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–µ</h2>
            <p><strong>–¶–µ–ª—å:</strong> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ª–∏ –Ω–æ–≤—ã–π –ø—É–Ω–∫—Ç "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º" –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –∞–¥–º–∏–Ω–∞</p>
            <p><strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω —Å —Ä–æ–ª—å—é "admin"</p>
            <p><strong>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong> –í –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Ä–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è –ø—É–Ω–∫—Ç "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º" —Å —Ç—Ä–µ–º—è –ø–æ–¥–ø—É–Ω–∫—Ç–∞–º–∏</p>
        </div>

        <div class="test-section">
            <h2>üöÄ –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
            <a href="http://localhost:3008/" target="_blank" class="admin-link">üè† –ì–ª–∞–≤–Ω–∞—è –∞–¥–º–∏–Ω–∫–∏</a>
            <a href="http://localhost:3008/dashboard" target="_blank" class="admin-link">üìä –î–∞—à–±–æ—Ä–¥</a>
            <a href="http://localhost:3008/page-content" target="_blank" class="admin-link">üìÑ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</a>
            <a href="http://localhost:3008/page-content/management" target="_blank" class="admin-link">‚öôÔ∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</a>
        </div>

        <div class="test-section">
            <h2>üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏</h2>
            <div class="result">
                <h3>‚úÖ –û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é:</h3>
                <pre>
üìä –î–∞—à–±–æ—Ä–¥
ü§ù –ü–∞—Ä—Ç–Ω–µ—Ä—ã
üë• –ö–ª–∏–µ–Ω—Ç—ã
üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
üìù –°—Ç–∞—Ç—å–∏
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
üåê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º ‚Üê –ù–û–í–´–ô –ü–£–ù–ö–¢
  ‚îú‚îÄ‚îÄ üìÑ –í–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç
  ‚îú‚îÄ‚îÄ ‚ûï –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
  ‚îî‚îÄ‚îÄ ‚öôÔ∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
üè¢ –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ç–æ—á–∫–∏
üìÖ –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </pre>
            </div>
        </div>

        <div class="test-section">
            <h2>üêõ –ï—Å–ª–∏ –ø—É–Ω–∫—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è</h2>
            <div class="result">
                <h3>üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</h3>
                <ul>
                    <li><strong>–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–æ–ª—å "admin"</li>
                    <li><strong>–ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞:</strong> –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (Ctrl+F5 –∏–ª–∏ Cmd+Shift+R)</li>
                    <li><strong>–°–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω:</strong> –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ npm start</li>
                    <li><strong>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:</strong> –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å –≤ —Å–∏—Å—Ç–µ–º–µ</li>
                </ul>
                
                <h3>üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h3>
                <p>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –Ω–∞–π–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:</p>
                <pre>
üîç SideNav Debug Info:
üë§ User: {...}
üé≠ User Role: admin
üëë Is Admin: true
                </pre>
            </div>
        </div>

        <div class="test-section">
            <h2>üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞</h2>
            <button class="test-button" onclick="checkServerStatus()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞</button>
            <button class="test-button" onclick="checkAuth()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é</button>
            <div class="result" id="server-result"></div>
        </div>
    </div>

    <script>
        async function checkServerStatus() {
            const resultDiv = document.getElementById('server-result');
            resultDiv.innerHTML = '<p>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞...</p>';
            
            try {
                const response = await fetch('http://localhost:3008');
                if (response.ok) {
                    resultDiv.innerHTML = `
                        <h3 class="status success">‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
                        <p>–°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: <a href="http://localhost:3008" target="_blank">http://localhost:3008</a></p>
                        <p>–°—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}</p>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <h3 class="status error">‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ—Ä–≤–µ—Ä–æ–º</h3>
                        <p>–°—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}</p>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <h3 class="status error">‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</h3>
                    <p>–û—à–∏–±–∫–∞: ${error.message}</p>
                    <p>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω npm start</p>
                `;
            }
        }

        async function checkAuth() {
            const resultDiv = document.getElementById('server-result');
            resultDiv.innerHTML = '<p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏...</p>';
            
            const token = localStorage.getItem('tvoya_shina_token');
            
            if (!token) {
                resultDiv.innerHTML = `
                    <h3 class="status error">‚ùå –¢–æ–∫–µ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω</h3>
                    <p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ</p>
                    <p><a href="http://localhost:3008/login" target="_blank">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</a></p>
                `;
                return;
            }

            try {
                const response = await fetch('http://localhost:8000/api/v1/auth/me', {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.innerHTML = `
                        <h3 class="status success">‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞</h3>
                        <p><strong>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> ${data.user.first_name} ${data.user.last_name}</p>
                        <p><strong>Email:</strong> ${data.user.email}</p>
                        <p><strong>–†–æ–ª—å:</strong> ${data.user.role}</p>
                        <p><strong>–î–æ—Å—Ç—É–ø –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º:</strong> ${data.user.role === 'admin' ? '‚úÖ –ï—Å—Ç—å' : '‚ùå –ù–µ—Ç'}</p>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <h3 class="status error">‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</h3>
                        <p>–°—Ç–∞—Ç—É—Å: ${response.status}</p>
                        <p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è</p>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <h3 class="status error">‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏</h3>
                    <p>–û—à–∏–±–∫–∞: ${error.message}</p>
                `;
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            setTimeout(checkServerStatus, 1000);
        });
    </script>
</body>
</html> 