<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç CRUD –æ–ø–µ—Ä–∞—Ü–∏–π —É—Å–ª—É–≥ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fafafa;
        }
        .section h2 {
            color: #333;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        button.danger {
            background-color: #f44336;
        }
        button.danger:hover {
            background-color: #da190b;
        }
        button.warning {
            background-color: #ff9800;
        }
        button.warning:hover {
            background-color: #e68900;
        }
        .result {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .success {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        input, textarea, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .flex {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è —É—Å–ª—É–≥ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π</h1>
        
        <div id="authStatus" class="status"></div>

        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥ -->
        <div class="section">
            <h2>üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥</h2>
            
            <h3>READ - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
            <div class="flex">
                <button onclick="getServiceCategories()">–ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</button>
                <button onclick="getServiceCategories(1, 10, '—Ç–µ—Å—Ç')">–° –ø–æ–∏—Å–∫–æ–º "—Ç–µ—Å—Ç"</button>
                <button onclick="getServiceCategories(1, 5)">–° –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π (5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)</button>
            </div>
            <div id="getCategoriesResult" class="result"></div>

            <h3>CREATE - –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h3>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" id="categoryName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" value="–¢–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è">
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="categoryDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</textarea>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="categoryActive" checked> –ê–∫—Ç–∏–≤–Ω–∞
                </label>
            </div>
            <div class="form-group">
                <label>–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:</label>
                <input type="number" id="categorySortOrder" value="1">
            </div>
            <button onclick="createServiceCategory()">–°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            <div id="createCategoryResult" class="result"></div>

            <h3>UPDATE - –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h3>
            <div class="flex">
                <input type="number" id="updateCategoryId" placeholder="ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" value="1">
                <input type="text" id="updateCategoryName" placeholder="–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" value="–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è">
                <button onclick="updateServiceCategory()">–û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
            <div id="updateCategoryResult" class="result"></div>

            <h3>DELETE - –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</h3>
            <div class="flex">
                <input type="number" id="deleteCategoryId" placeholder="ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è">
                <button class="danger" onclick="deleteServiceCategory()">–£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            </div>
            <div id="deleteCategoryResult" class="result"></div>
        </div>

        <!-- –£—Å–ª—É–≥–∏ -->
        <div class="section">
            <h2>üîß –£—Å–ª—É–≥–∏</h2>
            
            <h3>READ - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É—Å–ª—É–≥–∏</h3>
            <button onclick="getServices()">–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É—Å–ª—É–≥–∏</button>
            <div id="getServicesResult" class="result"></div>

            <h3>CREATE - –°–æ–∑–¥–∞—Ç—å —É—Å–ª—É–≥—É</h3>
            <div class="form-group">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" id="serviceName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏" value="–¢–µ—Å—Ç–æ–≤–∞—è —É—Å–ª—É–≥–∞">
            </div>
            <div class="form-group">
                <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                <textarea id="serviceDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥–∏">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —É—Å–ª—É–≥–∏</textarea>
            </div>
            <div class="form-group">
                <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–º–∏–Ω—É—Ç—ã):</label>
                <input type="number" id="serviceDefaultDuration" value="30">
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="serviceActive" checked> –ê–∫—Ç–∏–≤–Ω–∞
                </label>
            </div>
            <div class="form-group">
                <label>–ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏:</label>
                <input type="number" id="serviceSortOrder" value="1">
            </div>
            <button onclick="createService()">–°–æ–∑–¥–∞—Ç—å —É—Å–ª—É–≥—É</button>
            <div id="createServiceResult" class="result"></div>

            <h3>READ - –ü–æ–ª—É—á–∏—Ç—å —É—Å–ª—É–≥—É –ø–æ ID</h3>
            <div class="flex">
                <input type="number" id="getServiceId" placeholder="ID —É—Å–ª—É–≥–∏" value="1">
                <button onclick="getServiceById()">–ü–æ–ª—É—á–∏—Ç—å —É—Å–ª—É–≥—É</button>
            </div>
            <div id="getServiceResult" class="result"></div>

            <h3>UPDATE - –û–±–Ω–æ–≤–∏—Ç—å —É—Å–ª—É–≥—É</h3>
            <div class="flex">
                <input type="number" id="updateServiceId" placeholder="ID —É—Å–ª—É–≥–∏" value="1">
                <input type="text" id="updateServiceName" placeholder="–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" value="–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —É—Å–ª—É–≥–∞">
                <button onclick="updateService()">–û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
            <div id="updateServiceResult" class="result"></div>

            <h3>DELETE - –£–¥–∞–ª–∏—Ç—å —É—Å–ª—É–≥—É</h3>
            <div class="flex">
                <input type="number" id="deleteServiceId" placeholder="ID —É—Å–ª—É–≥–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è">
                <button class="danger" onclick="deleteService()">–£–¥–∞–ª–∏—Ç—å —É—Å–ª—É–≥—É</button>
            </div>
            <div id="deleteServiceResult" class="result"></div>
        </div>

        <!-- –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã -->
        <div class="section">
            <h2>üöÄ –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã</h2>
            <button onclick="runFullCRUDTest()">–ü–æ–ª–Ω—ã–π CRUD —Ç–µ—Å—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π</button>
            <button onclick="runServiceCRUDTest()">–ü–æ–ª–Ω—ã–π CRUD —Ç–µ—Å—Ç —É—Å–ª—É–≥</button>
            <button class="warning" onclick="clearAllResults()">–û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
            <div id="quickTestResult" class="result"></div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:8000/api/v1';
        let authToken = '';

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            checkAuth();
        };

        function checkAuth() {
            authToken = localStorage.getItem('tvoya_shina_token');
            const authStatus = document.getElementById('authStatus');
            
            if (authToken) {
                authStatus.className = 'status success';
                authStatus.textContent = '‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –¢–æ–∫–µ–Ω –Ω–∞–π–¥–µ–Ω –≤ localStorage.';
            } else {
                authStatus.className = 'status error';
                authStatus.textContent = '‚ùå –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.';
            }
        }

        function getHeaders() {
            return {
                'Content-Type': 'application/json',
                'Accept': 'application/json',
                ...(authToken && { 'Authorization': `Bearer ${authToken}` })
            };
        }

        function displayResult(elementId, data, isError = false) {
            const element = document.getElementById(elementId);
            element.className = isError ? 'result error' : 'result success';
            element.textContent = JSON.stringify(data, null, 2);
        }

        function logRequest(method, url, body = null) {
            console.log(`üîç ${method} ${url}`, body ? { body } : '');
        }

        // ===== –ö–ê–¢–ï–ì–û–†–ò–ò –£–°–õ–£–ì =====
        
        async function getServiceCategories(page = 1, per_page = 10, query = '') {
            try {
                const params = new URLSearchParams({
                    page: page.toString(),
                    per_page: per_page.toString()
                });
                
                if (query) {
                    params.append('query', query);
                }

                const url = `${API_URL}/service_categories?${params}`;
                logRequest('GET', url);
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: getHeaders()
                });

                const data = await response.json();
                
                if (response.ok) {
                    displayResult('getCategoriesResult', {
                        status: '–£—Å–ø–µ—Ö',
                        categories: data.data || [],
                        pagination: data.pagination || {},
                        total_found: data.data?.length || 0
                    });
                } else {
                    throw new Error(`HTTP ${response.status}: ${data.message || 'Unknown error'}`);
                }
            } catch (error) {
                displayResult('getCategoriesResult', {
                    status: '–û—à–∏–±–∫–∞',
                    error: error.message
                }, true);
            }
        }

        async function createServiceCategory() {
            try {
                const categoryData = {
                    name: document.getElementById('categoryName').value,
                    description: document.getElementById('categoryDescription').value,
                    is_active: document.getElementById('categoryActive').checked,
                    sort_order: parseInt(document.getElementById('categorySortOrder').value)
                };

                const url = `${API_URL}/service_categories`;
                logRequest('POST', url, categoryData);

                const response = await fetch(url, {
                    method: 'POST',
                    headers: getHeaders(),
                    body: JSON.stringify({ service_category: categoryData })
                });

                const data = await response.json();
                
                if (response.ok) {
                    displayResult('createCategoryResult', {
                        status: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ',
                        category: data
                    });
                } else {
                    throw new Error(`HTTP ${response.status}: ${data.message || 'Unknown error'}`);
                }
            } catch (error) {
                displayResult('createCategoryResult', {
                    status: '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è',
                    error: error.message
                }, true);
            }
        }

        async function updateServiceCategory() {
            try {
                const id = document.getElementById('updateCategoryId').value;
                const updateData = {
                    name: document.getElementById('updateCategoryName').value
                };

                const url = `${API_URL}/service_categories/${id}`;
                logRequest('PATCH', url, updateData);

                const response = await fetch(url, {
                    method: 'PATCH',
                    headers: getHeaders(),
                    body: JSON.stringify({ service_category: updateData })
                });

                const data = await response.json();
                
                if (response.ok) {
                    displayResult('updateCategoryResult', {
                        status: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ',
                        category: data
                    });
                } else {
                    throw new Error(`HTTP ${response.status}: ${data.message || 'Unknown error'}`);
                }
            } catch (error) {
                displayResult('updateCategoryResult', {
                    status: '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è',
                    error: error.message
                }, true);
            }
        }

        async function deleteServiceCategory() {
            try {
                const id = document.getElementById('deleteCategoryId').value;
                const url = `${API_URL}/service_categories/${id}`;
                logRequest('DELETE', url);

                const response = await fetch(url, {
                    method: 'DELETE',
                    headers: getHeaders()
                });

                if (response.ok) {
                    displayResult('deleteCategoryResult', {
                        status: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É–¥–∞–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ',
                        deleted_id: id
                    });
                } else {
                    const data = await response.json();
                    throw new Error(`HTTP ${response.status}: ${data.message || 'Unknown error'}`);
                }
            } catch (error) {
                displayResult('deleteCategoryResult', {
                    status: '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è',
                    error: error.message
                }, true);
            }
        }

        // ===== –£–°–õ–£–ì–ò =====

        async function getServices() {
            try {
                const url = `${API_URL}/services`;
                logRequest('GET', url);
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: getHeaders()
                });

                const data = await response.json();
                
                if (response.ok) {
                    displayResult('getServicesResult', {
                        status: '–£—Å–ø–µ—Ö',
                        services: data.data || data || [],
                        total_found: (data.data || data || []).length
                    });
                } else {
                    throw new Error(`HTTP ${response.status}: ${data.message || 'Unknown error'}`);
                }
            } catch (error) {
                displayResult('getServicesResult', {
                    status: '–û—à–∏–±–∫–∞',
                    error: error.message
                }, true);
            }
        }

        async function getServiceById() {
            try {
                const id = document.getElementById('getServiceId').value;
                const url = `${API_URL}/services/${id}`;
                logRequest('GET', url);
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: getHeaders()
                });

                const data = await response.json();
                
                if (response.ok) {
                    displayResult('getServiceResult', {
                        status: '–£—Å–ª—É–≥–∞ –Ω–∞–π–¥–µ–Ω–∞',
                        service: data
                    });
                } else {
                    throw new Error(`HTTP ${response.status}: ${data.message || 'Unknown error'}`);
                }
            } catch (error) {
                displayResult('getServiceResult', {
                    status: '–û—à–∏–±–∫–∞',
                    error: error.message
                }, true);
            }
        }

        async function createService() {
            try {
                const serviceData = {
                    name: document.getElementById('serviceName').value,
                    description: document.getElementById('serviceDescription').value,
                    default_duration: parseInt(document.getElementById('serviceDefaultDuration').value),
                    is_active: document.getElementById('serviceActive').checked,
                    sort_order: parseInt(document.getElementById('serviceSortOrder').value)
                };

                const url = `${API_URL}/services`;
                logRequest('POST', url, serviceData);

                const response = await fetch(url, {
                    method: 'POST',
                    headers: getHeaders(),
                    body: JSON.stringify({ service: serviceData })
                });

                const data = await response.json();
                
                if (response.ok) {
                    displayResult('createServiceResult', {
                        status: '–£—Å–ª—É–≥–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ',
                        service: data
                    });
                } else {
                    throw new Error(`HTTP ${response.status}: ${data.message || 'Unknown error'}`);
                }
            } catch (error) {
                displayResult('createServiceResult', {
                    status: '–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è',
                    error: error.message
                }, true);
            }
        }

        async function updateService() {
            try {
                const id = document.getElementById('updateServiceId').value;
                const updateData = {
                    name: document.getElementById('updateServiceName').value
                };

                const url = `${API_URL}/services/${id}`;
                logRequest('PATCH', url, updateData);

                const response = await fetch(url, {
                    method: 'PATCH',
                    headers: getHeaders(),
                    body: JSON.stringify({ service: updateData })
                });

                const data = await response.json();
                
                if (response.ok) {
                    displayResult('updateServiceResult', {
                        status: '–£—Å–ª—É–≥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ',
                        service: data
                    });
                } else {
                    throw new Error(`HTTP ${response.status}: ${data.message || 'Unknown error'}`);
                }
            } catch (error) {
                displayResult('updateServiceResult', {
                    status: '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è',
                    error: error.message
                }, true);
            }
        }

        async function deleteService() {
            try {
                const id = document.getElementById('deleteServiceId').value;
                const url = `${API_URL}/services/${id}`;
                logRequest('DELETE', url);

                const response = await fetch(url, {
                    method: 'DELETE',
                    headers: getHeaders()
                });

                if (response.ok) {
                    displayResult('deleteServiceResult', {
                        status: '–£—Å–ª—É–≥–∞ —É–¥–∞–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ',
                        deleted_id: id
                    });
                } else {
                    const data = await response.json();
                    throw new Error(`HTTP ${response.status}: ${data.message || 'Unknown error'}`);
                }
            } catch (error) {
                displayResult('deleteServiceResult', {
                    status: '–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è',
                    error: error.message
                }, true);
            }
        }

        // ===== –ë–´–°–¢–†–´–ï –¢–ï–°–¢–´ =====

        async function runFullCRUDTest() {
            document.getElementById('quickTestResult').textContent = '–ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ CRUD —Ç–µ—Å—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π...';
            
            try {
                // 1. –°–æ–∑–¥–∞–Ω–∏–µ
                console.log('1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...');
                const createResponse = await fetch(`${API_URL}/service_categories`, {
                    method: 'POST',
                    headers: getHeaders(),
                    body: JSON.stringify({
                        service_category: {
                            name: 'CRUD Test Category',
                            description: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π',
                            is_active: true,
                            sort_order: 999
                        }
                    })
                });
                
                if (!createResponse.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è: ${createResponse.status}`);
                }
                
                const createdCategory = await createResponse.json();
                const categoryId = createdCategory.id;
                console.log('‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ–∑–¥–∞–Ω–∞:', categoryId);

                // 2. –ß—Ç–µ–Ω–∏–µ
                console.log('2. –ß—Ç–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...');
                const readResponse = await fetch(`${API_URL}/service_categories/${categoryId}`, {
                    method: 'GET',
                    headers: getHeaders()
                });
                
                if (!readResponse.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è: ${readResponse.status}`);
                }
                
                const readCategory = await readResponse.json();
                console.log('‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–æ—á–∏—Ç–∞–Ω–∞:', readCategory);

                // 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
                console.log('3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...');
                const updateResponse = await fetch(`${API_URL}/service_categories/${categoryId}`, {
                    method: 'PATCH',
                    headers: getHeaders(),
                    body: JSON.stringify({
                        service_category: {
                            name: 'CRUD Test Category (Updated)',
                            description: '–û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ'
                        }
                    })
                });
                
                if (!updateResponse.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: ${updateResponse.status}`);
                }
                
                const updatedCategory = await updateResponse.json();
                console.log('‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞:', updatedCategory);

                // 4. –£–¥–∞–ª–µ–Ω–∏–µ
                console.log('4. –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...');
                const deleteResponse = await fetch(`${API_URL}/service_categories/${categoryId}`, {
                    method: 'DELETE',
                    headers: getHeaders()
                });
                
                if (!deleteResponse.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: ${deleteResponse.status}`);
                }
                
                console.log('‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏—è —É–¥–∞–ª–µ–Ω–∞');

                displayResult('quickTestResult', {
                    status: 'üéâ –ü–æ–ª–Ω—ã–π CRUD —Ç–µ—Å—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ!',
                    steps: {
                        create: createdCategory,
                        read: readCategory,
                        update: updatedCategory,
                        delete: '–£—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–æ'
                    }
                });

            } catch (error) {
                displayResult('quickTestResult', {
                    status: '‚ùå –û—à–∏–±–∫–∞ –≤ CRUD —Ç–µ—Å—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π',
                    error: error.message
                }, true);
            }
        }

        async function runServiceCRUDTest() {
            document.getElementById('quickTestResult').textContent = '–ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ CRUD —Ç–µ—Å—Ç–∞ —É—Å–ª—É–≥...';
            
            try {
                // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è —É—Å–ª—É–≥
                console.log('1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π —É—Å–ª—É–≥–∏...');
                const createResponse = await fetch(`${API_URL}/services`, {
                    method: 'POST',
                    headers: getHeaders(),
                    body: JSON.stringify({
                        service: {
                            name: 'CRUD Test Service',
                            description: '–£—Å–ª—É–≥–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π',
                            default_duration: 45,
                            is_active: true,
                            sort_order: 999
                        }
                    })
                });
                
                if (!createResponse.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —É—Å–ª—É–≥–∏: ${createResponse.status}`);
                }
                
                const createdService = await createResponse.json();
                const serviceId = createdService.id;
                console.log('‚úÖ –£—Å–ª—É–≥–∞ —Å–æ–∑–¥–∞–Ω–∞:', serviceId);

                // –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è Read, Update, Delete...
                
                displayResult('quickTestResult', {
                    status: 'üéâ –ü–æ–ª–Ω—ã–π CRUD —Ç–µ—Å—Ç —É—Å–ª—É–≥ –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ!',
                    service: createdService
                });

            } catch (error) {
                displayResult('quickTestResult', {
                    status: '‚ùå –û—à–∏–±–∫–∞ –≤ CRUD —Ç–µ—Å—Ç–µ —É—Å–ª—É–≥',
                    error: error.message
                }, true);
            }
        }

        function clearAllResults() {
            const resultElements = document.querySelectorAll('.result');
            resultElements.forEach(element => {
                element.textContent = '';
                element.className = 'result';
            });
        }
    </script>
</body>
</html>
