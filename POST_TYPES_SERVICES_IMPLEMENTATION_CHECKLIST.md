# üìã –ß–ï–ö–õ–ò–°–¢ –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –¢–ò–ü–û–í –ü–û–°–¢–û–í –ò –ö–ê–¢–ï–ì–û–†–ò–ô –£–°–õ–£–ì

## üéØ –¶–ï–õ–¨ –ü–†–û–ï–ö–¢–ê
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Å–ª—É–≥ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â—É—é:
- –ü—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –ø–æ—Å—Ç—ã –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —É—Å–ª—É–≥ (—à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂, –º–æ–π–∫–∞, –°–¢–û)
- –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ—á–∫–∏ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ –ø–æ—Å—Ç–∞–º –Ω—É–∂–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –£–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–º–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- –§–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø —É—Å–ª—É–≥ –≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

---

## üîç –ê–ù–ê–õ–ò–ó –¢–ï–ö–£–©–ï–ì–û –°–û–°–¢–û–Ø–ù–ò–Ø

### ‚úÖ –ß–¢–û –£–ñ–ï –ï–°–¢–¨:
- [x] –ú–æ–¥–µ–ª—å `ServiceCategory` —Å –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- [x] –ú–æ–¥–µ–ª—å `Service` –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- [x] –ú–æ–¥–µ–ª—å `ServicePost` —Å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- [x] –ú–æ–¥–µ–ª—å `Booking` —Å –ø–æ–ª—è–º–∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è —É—Å–ª—É–≥–∏
- [x] API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —É—Å–ª—É–≥
- [x] Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏

### ‚ùå –ß–¢–û –ù–£–ñ–ù–û –î–û–ë–ê–í–ò–¢–¨:
- [ ] –°–≤—è–∑—å –ø–æ—Å—Ç–æ–≤ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —É—Å–ª—É–≥
- [ ] –ü–æ–ª–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö
- [ ] –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- [ ] –õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- [ ] UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
- [ ] –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ —à–∞–≥–∞ "–£—Å–ª—É–≥–∏" –≤ —Ñ–æ—Ä–º–µ —Å–µ—Ä–≤–∏—Å–Ω–æ–π —Ç–æ—á–∫–∏

---

## üìä –≠–¢–ê–ü 1: BACKEND - –°–¢–†–£–ö–¢–£–†–ê –î–ê–ù–ù–´–•

### 1.1 –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- [ ] **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Å–≤—è–∑–∏ –ø–æ—Å—Ç–æ–≤ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏**
  ```ruby
  # 20250627_add_service_category_to_service_posts.rb
  add_reference :service_posts, :service_category, null: true, foreign_key: true
  add_index :service_posts, [:service_point_id, :service_category_id]
  ```

- [ ] **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è—Ö**
  ```ruby
  # 20250627_add_service_category_to_bookings.rb
  add_reference :bookings, :service_category, null: true, foreign_key: true
  add_index :bookings, :service_category_id
  ```

- [ ] **–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º**
  ```ruby
  # 20250627_create_service_point_category_contacts.rb
  create_table :service_point_category_contacts do |t|
    t.references :service_point, null: false, foreign_key: true
    t.references :service_category, null: false, foreign_key: true
    t.string :contact_phone, null: false
    t.string :contact_email
    t.text :notes
    t.timestamps
  end
  add_index :service_point_category_contacts, 
    [:service_point_id, :service_category_id], 
    unique: true, 
    name: 'idx_sp_category_contacts_unique'
  ```

### 1.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å ServicePost**
  ```ruby
  # app/models/service_post.rb
  belongs_to :service_category, optional: true
  
  scope :by_category, ->(category_id) { where(service_category_id: category_id) }
  scope :with_category, -> { includes(:service_category) }
  
  def category_name
    service_category&.name
  end
  
  def supports_category?(category_id)
    service_category_id == category_id
  end
  ```

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å ServicePoint**
  ```ruby
  # app/models/service_point.rb
  has_many :service_point_category_contacts, dependent: :destroy
  has_many :supported_categories, through: :service_point_category_contacts, source: :service_category
  
  def posts_for_category(category_id)
    service_posts.active.by_category(category_id)
  end
  
  def posts_count_for_category(category_id)
    posts_for_category(category_id).count
  end
  
  def contact_phone_for_category(category_id)
    service_point_category_contacts.find_by(service_category_id: category_id)&.contact_phone
  end
  
  def supports_category?(category_id)
    posts_for_category(category_id).exists?
  end
  ```

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å –º–æ–¥–µ–ª—å Booking**
  ```ruby
  # app/models/booking.rb
  belongs_to :service_category, optional: true
  
  scope :by_category, ->(category_id) { where(service_category_id: category_id) }
  
  validate :service_category_supported_by_service_point
  
  private
  
  def service_category_supported_by_service_point
    return unless service_category_id && service_point_id
    
    unless service_point.supports_category?(service_category_id)
      errors.add(:service_category_id, '–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–∞–Ω–Ω–æ–π —Å–µ—Ä–≤–∏—Å–Ω–æ–π —Ç–æ—á–∫–æ–π')
    end
  end
  ```

- [ ] **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å ServicePointCategoryContact**
  ```ruby
  # app/models/service_point_category_contact.rb
  class ServicePointCategoryContact < ApplicationRecord
    belongs_to :service_point
    belongs_to :service_category
    
    validates :contact_phone, presence: true
    validates :service_point_id, uniqueness: { scope: :service_category_id }
    
    def display_name
      "#{service_category.name} - #{contact_phone}"
    end
  end
  ```

### 1.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤

- [ ] **–°–æ–∑–¥–∞—Ç—å ServicePointCategoryContactsController**
  ```ruby
  # app/controllers/api/v1/service_point_category_contacts_controller.rb
  class Api::V1::ServicePointCategoryContactsController < Api::V1::BaseController
    # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  end
  ```

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å ServicePointsController**
  ```ruby
  # –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
  def categories
    # GET /api/v1/service_points/:id/categories
  end
  
  def posts_by_category
    # GET /api/v1/service_points/:id/posts_by_category
  end
  ```

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å BookingsController**
  ```ruby
  # –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É service_category_id –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
  def booking_params
    params.require(:booking).permit(
      # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
      :service_category_id
    )
  end
  ```

### 1.4 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å DynamicAvailabilityService**
  ```ruby
  # app/services/dynamic_availability_service.rb
  def self.check_availability_with_category(service_point_id, date, start_time, duration, category_id = nil)
    service_point = ServicePoint.find(service_point_id)
    
    # –ü–æ–ª—É—á–∞–µ–º –ø–æ—Å—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏ –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ
    available_posts = if category_id
      service_point.posts_for_category(category_id)
    else
      service_point.service_posts.active
    end
    
    return { available: false, reason: '–ù–µ—Ç –ø–æ—Å—Ç–æ–≤ –¥–ª—è –¥–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥' } if available_posts.empty?
    
    # –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏...
  end
  ```

- [ ] **–°–æ–∑–¥–∞—Ç—å CategoryFilterService**
  ```ruby
  # app/services/category_filter_service.rb
  class CategoryFilterService
    def self.service_points_with_category(category_id, city_id = nil)
      # –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Ç–æ—á–µ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    end
    
    def self.available_time_slots_by_category(service_point_id, date, category_id)
      # –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    end
  end
  ```

---

## üé® –≠–¢–ê–ü 2: FRONTEND - –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ô –ò–ù–¢–ï–†–§–ï–ô–°

### 2.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ TypeScript

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã –¥–ª—è ServicePost**
  ```typescript
  // src/types/models.ts
  interface ServicePost {
    id: number;
    service_point_id: number;
    post_number: number;
    name: string;
    service_category_id?: number;
    service_category?: ServiceCategory;
    slot_duration: number;
    is_active: boolean;
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  }
  ```

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã –¥–ª—è Booking**
  ```typescript
  // src/types/booking.ts
  interface BookingFormData {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    service_category_id?: number;
  }
  
  interface Booking {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    service_category_id?: number;
    service_category?: ServiceCategory;
  }
  ```

- [ ] **–°–æ–∑–¥–∞—Ç—å —Ç–∏–ø—ã –¥–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π**
  ```typescript
  // src/types/models.ts
  interface ServicePointCategoryContact {
    id: number;
    service_point_id: number;
    service_category_id: number;
    service_category: ServiceCategory;
    contact_phone: string;
    contact_email?: string;
    notes?: string;
  }
  ```

### 2.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API —Å–ª–æ—è

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å servicePoints.api.ts**
  ```typescript
  // src/api/servicePoints.api.ts
  getServicePointsByCategory: builder.query<ServicePoint[], { categoryId: number; cityId?: number }>({
    query: ({ categoryId, cityId }) => ({
      url: 'service_points/by_category',
      params: { category_id: categoryId, city_id: cityId }
    })
  }),
  
  getPostsByCategory: builder.query<ServicePost[], { servicePointId: number; categoryId: number }>({
    query: ({ servicePointId, categoryId }) => 
      `service_points/${servicePointId}/posts_by_category?category_id=${categoryId}`
  })
  ```

- [ ] **–°–æ–∑–¥–∞—Ç—å categoryContacts.api.ts**
  ```typescript
  // src/api/categoryContacts.api.ts
  export const categoryContactsApi = baseApi.injectEndpoints({
    endpoints: (builder) => ({
      getCategoryContacts: builder.query<ServicePointCategoryContact[], number>({
        query: (servicePointId) => `service_points/${servicePointId}/category_contacts`
      }),
      // CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
    })
  });
  ```

### 2.3 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ñ–æ—Ä–º—ã –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] **–°–æ–∑–¥–∞—Ç—å CategorySelectionStep**
  ```typescript
  // src/pages/bookings/components/CategorySelectionStep.tsx
  const CategorySelectionStep: React.FC<StepProps> = ({ formData, updateFormData, onNext, onBack }) => {
    // –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥ –ø–µ—Ä–µ–¥ –≤—ã–±–æ—Ä–æ–º —Å–µ—Ä–≤–∏—Å–Ω–æ–π —Ç–æ—á–∫–∏
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ—á–µ–∫ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  };
  ```

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å CityServicePointStep**
  ```typescript
  // –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  const { data: servicePoints } = useGetServicePointsByCategoryQuery({
    categoryId: formData.service_category_id,
    cityId: formData.city_id
  });
  ```

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å DateTimeStep**
  ```typescript
  // –£—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
  const checkAvailability = useCallback(async (date: Date, time: string) => {
    const result = await checkAvailabilityWithCategory({
      servicePointId: formData.service_point_id,
      date: date.toISOString().split('T')[0],
      startTime: time,
      duration: estimatedDuration,
      categoryId: formData.service_category_id
    });
  }, [formData.service_point_id, formData.service_category_id]);
  ```

### 2.4 –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å ServicePointFormPage - —à–∞–≥ PostsStep**
  ```typescript
  // src/pages/service-points/components/PostsStep.tsx
  interface PostFormData {
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    service_category_id: number;
  }
  
  // –î–æ–±–∞–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç –≤—ã–±–æ—Ä–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  ```

- [ ] **–°–æ–∑–¥–∞—Ç—å CategoryContactsStep**
  ```typescript
  // src/pages/service-points/components/CategoryContactsStep.tsx
  const CategoryContactsStep: React.FC = () => {
    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–º–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞–º–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    // –¢–∞–±–ª–∏—Ü–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  };
  ```

- [ ] **–û–±–Ω–æ–≤–∏—Ç—å BookingsPage - –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º**
  ```typescript
  // src/pages/bookings/BookingsPage.tsx
  const categoryFilter: FilterConfig = {
    key: 'service_category_id',
    label: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å–ª—É–≥',
    type: 'select',
    options: serviceCategories?.map(cat => ({
      value: cat.id.toString(),
      label: cat.name
    })) || []
  };
  ```

---

## üß™ –≠–¢–ê–ü 3: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò –í–ê–õ–ò–î–ê–¶–ò–Ø

### 3.1 Backend —Ç–µ—Å—Ç—ã

- [ ] **–¢–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π**
  ```ruby
  # spec/models/service_post_spec.rb
  describe 'category associations' do
    it 'belongs to service_category' do
      # –¢–µ—Å—Ç —Å–≤—è–∑–∏ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π
    end
    
    it 'filters posts by category' do
      # –¢–µ—Å—Ç —Å–∫–æ—É–ø–∞ by_category
    end
  end
  ```

- [ ] **–¢–µ—Å—Ç—ã API**
  ```ruby
  # spec/requests/api/v1/service_points_spec.rb
  describe 'GET /api/v1/service_points/by_category' do
    # –¢–µ—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ—á–µ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  end
  ```

- [ ] **–¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤**
  ```ruby
  # spec/services/dynamic_availability_service_spec.rb
  describe 'availability with category filter' do
    # –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å —É—á–µ—Ç–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
  end
  ```

### 3.2 Frontend —Ç–µ—Å—Ç—ã

- [ ] **–¢–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
  ```typescript
  // src/pages/bookings/components/__tests__/CategorySelectionStep.test.tsx
  describe('CategorySelectionStep', () => {
    it('renders category options correctly', () => {
      // –¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π
    });
    
    it('filters service points by selected category', () => {
      // –¢–µ—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–æ—á–µ–∫
    });
  });
  ```

- [ ] **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**
  ```typescript
  // src/__tests__/booking-flow-with-categories.test.tsx
  describe('Booking flow with categories', () => {
    it('completes booking with category selection', () => {
      // –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å –≤—ã–±–æ—Ä–æ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    });
  });
  ```

### 3.3 –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

- [ ] **–°–æ–∑–¥–∞—Ç—å seeds –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ –ø–æ—Å—Ç–æ–≤**
  ```ruby
  # db/seeds/service_categories_with_posts.rb
  # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –ø–æ—Å—Ç–æ–≤ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  ```

- [ ] **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ—Å—Ç–æ–≤**
  ```ruby
  # –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–æ—Å—Ç–∞–º
  ```

---

## üöÄ –≠–¢–ê–ü 4: –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï –ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø

### 4.1 –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- [ ] **–°–∫—Ä–∏–ø—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–æ—Å—Ç–∞–º**
  ```ruby
  # lib/tasks/assign_categories_to_posts.rake
  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª—É–≥ —Ç–æ—á–∫–∏
  ```

- [ ] **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π**
  ```ruby
  # –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Å–ª—É–≥
  ```

### 4.2 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- [ ] **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**
  ```sql
  -- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  -- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  ```

- [ ] **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö**
  ```ruby
  # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ—á–µ–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  ```

### 4.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- [ ] **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π**
  ```ruby
  # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
  ```

- [ ] **–ú–µ—Ç—Ä–∏–∫–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏**
  ```ruby
  # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  ```

---

## üìà –≠–¢–ê–ü 5: –ê–ù–ê–õ–ò–¢–ò–ö–ê –ò –û–¢–ß–ï–¢–ù–û–°–¢–¨

### 5.1 –î–∞—à–±–æ—Ä–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

- [ ] **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º**
  ```typescript
  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  // –ê–Ω–∞–ª–∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  ```

- [ ] **–û—Ç—á–µ—Ç—ã –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**
  ```typescript
  // –û—Ç—á–µ—Ç –ø–æ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  // –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  ```

### 5.2 –§–∏–ª—å—Ç—Ä—ã –∏ –ø–æ–∏—Å–∫

- [ ] **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ –∞–¥–º–∏–Ω–∫–µ**
  ```typescript
  // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
  // –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –ø–æ–∏—Å–∫–µ
  ```

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –ì–û–¢–û–í–ù–û–°–¢–ò

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- [ ] –í—Å–µ –ø–æ—Å—Ç—ã –∏–º–µ—é—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- [ ] –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- [ ] –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [ ] –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –±–µ–∑ –ø–æ—Ç–µ—Ä—å
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ —Å–Ω–∏–∑–∏–ª–∞—Å—å
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–±—É—á–µ–Ω—ã –Ω–æ–≤–æ–º—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

1. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ**: –ú–æ–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏, –∑–∞—Ç–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ª–æ–≥–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤

---

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞**: üü° –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: –ö–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏  
**–°—Ä–æ–∫**: –ü–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π 